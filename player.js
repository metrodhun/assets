/*!
 * BloggerMusicPlayer
 * Version  : 1.1.4
 * License  : Unlicensed
 * Copyright: 2025 VergeLyrics (For MetroDhun.Com)
 */
!function(){function e(){document.documentElement.classList.add("is-initializing");const e=()=>new Promise(((e,t)=>{if(window.YT&&"function"==typeof window.YT.Player)return void e(window.YT);const a=document.createElement("script");a.src="https://www.youtube.com/iframe_api",a.onerror=()=>t(new Error("Failed to load YouTube IFrame API"));const i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(a,i),window.onYouTubeIframeAPIReady=()=>{document.documentElement.classList.remove("is-initializing"),toastNotif.success("Player Loaded!"),e(window.YT)},setTimeout((()=>{window.YT&&"function"==typeof window.YT.Player||t(new Error("YouTube IFrame API did not load in time"))}),5e3)}));return e().catch((()=>(toastNotif.already("Error Loading player"),e().catch((()=>{toastNotif.error("Network problem detected!"),setTimeout((()=>{toastNotif("Reloading site...."),location.reload()}),5e3)})))))}function t(){const e=document.getElementById("shuffle"),t=document.getElementById("queue");if(!e||!t)return;t.querySelectorAll("li.plyr-item").length>=3?e.removeAttribute("disabled"):e.setAttribute("disabled","true")}function a(){const e=document.getElementById("shuffle"),t=document.getElementById("queue");e&&t&&e.addEventListener("click",(()=>{if(e.classList.contains("active"))return e.classList.remove("active"),void localStorage.removeItem("shuffle_song");e.classList.add("active"),localStorage.setItem("shuffle_song","true");const a=Array.from(t.querySelectorAll("li.plyr-item")),i=t.querySelector("li.plyr-item.is-current"),o=a.filter((e=>e!==i));for(let e=o.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[o[e],o[t]]=[o[t],o[e]]}i&&t.appendChild(i),o.forEach((e=>{t.appendChild(e)}))}))}function i(){const e=document.getElementById("repeat");if(!e)return;const t=document.getElementById("queue"),a=localStorage.getItem("repeat_song");function i(){document.documentElement.hasAttribute("data-music-playing")||t&&t.children.length>0?e.removeAttribute("disabled"):e.setAttribute("disabled","true")}if("2"===a?(e.classList.add("all"),e.classList.remove("one")):"1"===a?(e.classList.add("one"),e.classList.remove("all")):e.classList.remove("one","all"),i(),t){new MutationObserver((()=>{i()})).observe(t,{childList:!0})}const s=document.documentElement;new MutationObserver((e=>{for(const t of e)if("attributes"===t.type&&"data-music-playing"===t.attributeName){i();break}})).observe(s,{attributes:!0}),e._repeatListenerAttached||(e.addEventListener("click",(()=>{let t=localStorage.getItem("repeat_song");t?"2"===t?(localStorage.setItem("repeat_song","1"),e.classList.remove("all"),e.classList.add("one"),toastNotif.success("Loop one")):"1"===t&&(localStorage.removeItem("repeat_song"),e.classList.remove("one","all"),toastNotif.already("Repeat off")):(localStorage.setItem("repeat_song","2"),e.classList.remove("one"),e.classList.add("all"),toastNotif.success("Loop all")),o(),n()})),e._repeatListenerAttached=!0)}function o(){const e=document.getElementById("next"),t=document.getElementById("queue");if(!e||!t)return;const a=t.querySelectorAll("li.plyr-item"),i=t.querySelector("li.plyr-item.is-current"),o=localStorage.getItem("repeat_song");a.length<2?e.setAttribute("disabled","true"):("1"===o?e.setAttribute("disabled","true"):"2"===o?e.removeAttribute("disabled"):i&&!i.nextElementSibling?e.setAttribute("disabled","true"):e.removeAttribute("disabled"),applyPlayerItemColor())}function n(){const e=document.getElementById("previous"),t=document.getElementById("queue");if(!e||!t)return;const a=t.querySelectorAll("li.plyr-item"),i=t.querySelector("li.plyr-item.is-current"),o=localStorage.getItem("repeat_song");if(a.length<2)e.setAttribute("disabled","true");else{if("1"===o)e.setAttribute("disabled","true");else{let t=i?i.previousElementSibling:null;for(;t&&!t.classList.contains("plyr-item");)t=t.previousElementSibling;t?e.removeAttribute("disabled"):e.setAttribute("disabled","true")}applyPlayerItemColor()}}function s(){const e=document.getElementById("next");e&&e.addEventListener("click",(()=>{e.hasAttribute("disabled")||(playNextSong(),o(),n())}))}function r(){const e=document.getElementById("previous"),t=document.getElementById("queue");e&&t&&e.addEventListener("click",(()=>{if(e.hasAttribute("disabled"))return;const a=t.querySelector("li.plyr-item.is-current");if(a&&a.previousElementSibling){const e=a.previousElementSibling.querySelector("[data-queue-play-id]");e&&d(e)}n(),o()}))}function l(){function t(e){const t=Math.floor(e/60);let a=Math.floor(e%60);return a<10&&(a="0"+a),t+":"+a}window.ytPlayer=null,window.updateTime=function e(){if(!window.ytPlayer||"function"!=typeof window.ytPlayer.getCurrentTime)return;let a=window.ytPlayer.getCurrentTime(),i=window.ytPlayer.getDuration();isFinite(a)||(a=0),(!isFinite(i)||i<=0)&&(i=1),window.leftTimeEl&&(window.leftTimeEl.innerHTML=t(a)),window.rightTimeEl&&(window.rightTimeEl.innerHTML=t(i));const o=a/i*100;if(window.seekInput){const e=isFinite(o)?o:0;window.seekInput.value=e,window.seekInput.setAttribute("aria-valuenow",e),window.seekInput.style.setProperty("--value",e+"%"),window.seekInput.setAttribute("aria-valuetext",t(a)+" of "+t(i))}if(window.bufferdProgress&&"function"==typeof window.ytPlayer.getVideoLoadedFraction){let e=window.ytPlayer.getVideoLoadedFraction();isFinite(e)||(e=0);const t=100*e;window.bufferdProgress.value=isFinite(t)?t:0}window.ytPlayer.getPlayerState&&window.ytPlayer.getPlayerState()===YT.PlayerState.PLAYING&&requestAnimationFrame(e)},window.togglePlay=document.getElementById("toggle-play"),window.leftTimeEl=document.getElementById("left-time"),window.rightTimeEl=document.getElementById("right-time"),window.seekInput=document.getElementById("seek-progress"),window.bufferdProgress=document.getElementById("bufferd-progress");const a=document.getElementById("tooltip");if(window.togglePlay&&window.togglePlay.addEventListener("click",(function(){if(window.ytPlayer&&"function"==typeof window.ytPlayer.getPlayerState&&window.ytPlayer.getPlayerState()===YT.PlayerState.ENDED)return window.ytPlayer.seekTo(0,!0),window.ytPlayer.playVideo(),window.togglePlay.classList.add("is-pressed"),window.togglePlay.setAttribute("aria-pressed","true"),void requestAnimationFrame(window.updateTime);window.togglePlay.classList.contains("is-pressed")?(window.ytPlayer&&"function"==typeof window.ytPlayer.pauseVideo&&window.ytPlayer.pauseVideo(),window.togglePlay.classList.remove("is-pressed"),window.togglePlay.setAttribute("aria-pressed","false")):(window.ytPlayer&&"function"==typeof window.ytPlayer.playVideo&&window.ytPlayer.playVideo(),window.togglePlay.classList.add("is-pressed"),window.togglePlay.setAttribute("aria-pressed","true"),requestAnimationFrame(window.updateTime))})),window.seekInput&&a){let m,y=!1;function i(e){const t=window.seekInput.getBoundingClientRect(),a=function(e){return e.touches&&e.touches.length>0?e.touches[0].clientX:e.changedTouches&&e.changedTouches.length>0?e.changedTouches[0].clientX:e.clientX}(e),i=a-t.left;return Math.max(0,Math.min(100,i/t.width*100))}function n(e){const t=document.querySelector(".seek-progress");t&&t.style.setProperty("--value",e+"%")}function s(e){if(window.ytPlayer&&"function"==typeof window.ytPlayer.getDuration&&"function"==typeof window.ytPlayer.seekTo){const t=e/100*window.ytPlayer.getDuration();window.ytPlayer.seekTo(t,!0)}}function r(e){e.type.startsWith("touch")&&e.preventDefault();const o=i(e);a.style.left=o+"%";let r=0;window.ytPlayer&&"function"==typeof window.ytPlayer.getDuration&&(r=window.ytPlayer.getDuration());const l=o/100*r;a.innerText=t(l),n(o),y&&(m&&cancelAnimationFrame(m),m=requestAnimationFrame((()=>{s(o)})))}function l(e){if(e.type.startsWith("touch")&&e.preventDefault(),"mousedown"===e.type&&0!==e.button)return;y=!0;const t=i(e);n(t),s(t),a.classList.add("visible")}function u(e){if(e.type.startsWith("touch")&&e.preventDefault(),y){y=!1;const t=i(e);n(t),s(t),a.classList.remove("visible")}}window.seekInput.addEventListener("mousemove",r),window.seekInput.addEventListener("mousedown",l),window.addEventListener("mouseup",u),window.seekInput.addEventListener("click",(e=>{const t=i(e);n(t),s(t)})),window.seekInput.addEventListener("mouseenter",(()=>{a.classList.add("visible")})),window.seekInput.addEventListener("mouseleave",(()=>{a.classList.remove("visible")})),window.seekInput.addEventListener("touchmove",r),window.seekInput.addEventListener("touchstart",l),window.seekInput.addEventListener("touchend",u),window.seekInput.addEventListener("touchcancel",u)}async function c(t){try{const a=function(e){const t=e.getAttribute("data-play-title-name");if(t&&t.trim())return t.trim();let a=e.closest(".ipst")||document,i=a.querySelector(".ipstBD .ipstT a");return i&&i.textContent.trim()?i.textContent.trim():(i=a.querySelector(".pTitle")||document.querySelector(".pTitle"),i&&i.textContent.trim()?i.textContent.trim():(i=a.querySelector("h4")||document.querySelector("h1"),i&&i.textContent.trim()?i.textContent.trim():null))}(t);if(!a)return void console.error("Could not find artist name for Artist flow.");const i=`/feeds/posts/default?max-results=99&q=${encodeURIComponent(a)}&alt=json`,n=await fetch(i);if(!n.ok)throw new Error(`Network response was not ok: ${n.status}`);const s=await n.json(),r=s.feed&&s.feed.entry||[];if(0===r.length)return void toastNotif.already("No songs found");const l=r.filter((e=>{if(!e.category)return!1;const t=Array.isArray(e.category)?e.category:[e.category],a=t.some((e=>"string"==typeof e.term&&"Song"===e.term.trim())),i=t.some((e=>"string"==typeof e.term&&"Main Album"===e.term.trim()));return a&&!i}));if(0===l.length)return void console.warn(`No Song-category posts (excluding Main Album) found for artist "${a}".`);const u=[];for(const e of l){if(!e.content||!e.content.$t)continue;const t=new DOMParser,i=t.parseFromString(e.content.$t,"text/html").querySelector("#post-song-data");if(!i)continue;const o=i.getAttribute("data-music");if(!o)continue;const n=i.getAttribute("data-image")||"",s=i.getAttribute("data-title-name")||"",r=i.getAttribute("data-artist")||a,l=i.getAttribute("data-lyricist")||"",d=i.getAttribute("data-composer")||"",c=i.getAttribute("data-cast")||"",m=i.getAttribute("data-language")||"",y=i.getAttribute("data-mood")||"",p=i.getAttribute("data-song-type")||"",g=i.getAttribute("data-genre")||"",w=i.getAttribute("data-duration")||"",f=i.getAttribute("data-release-date")||"",b=i.getAttribute("data-year")||"",h=i.getAttribute("data-label")||"",v=i.getAttribute("data-movie")||"";let A="";if(Array.isArray(e.link)){const t=e.link.find((e=>"alternate"===e.rel&&e.href));t&&(A=t.href)}A||(A="#");let P=!1;Array.isArray(e.category)&&(P=e.category.some((e=>"explicit"===e?.term?.toLowerCase())));let E=null;if(e.id&&e.id.$t){const t=e.id.$t.split("post-");t.length>1&&(E=t[1])}E||(E=o),u.push({postUrl:A,playId:E,isExplicit:P,musicId:o,imageUrl:n,songName:s,artist:r,lyricist:l,composer:d,cast:c,language:m,mood:y,songType:p,genre:g,duration:w,releaseDate:f,year:b,label:h,movie:v})}if(0===u.length)return void console.warn("No valid songs parsed for Artist flow.");!function(e){for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}}(u);const c=document.getElementById("queue");if(!c)return void console.error("Queue container (#queue) not found.");c.innerHTML="",c.setAttribute("data-is-played-from","Artist"),c.setAttribute("data-lang-queue",u[0].language||""),c.setAttribute("data-artist-queue",a);const m=new Set,y=u[0];y&&(y.mood&&m.add(y.mood),y.artist?.split(",").forEach((e=>{const t=e.trim();t&&m.add(t)})),y.cast?.split(",").forEach((e=>{const t=e.trim();t&&m.add(t)})),y.genre&&m.add(y.genre));const p=Array.from(m).filter((e=>e));c.setAttribute("data-queue-meta",`[${p.join(",")}]`),u.forEach(((e,t)=>{const a=document.createElement("li");a.className="plyr-item"+(0===t?" is-current":""),a.setAttribute("data-queue-id",e.playId),a.setAttribute("data-music-id",e.musicId),a.setAttribute("data-song-source",e.postUrl),e.genre&&a.setAttribute("data-genre",e.genre),a.innerHTML=`<article class="f ai-c plyr-list-item-inner"><div class="f ai-c jc-c plyr-item-list dragQ"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24"><path d="M16 2C17.1046 2 18 2.89543 18 4C18 5.10457 17.1046 6 16 6C14.8954 6 14 5.10457 14 4C14 2.89543 14.8954 2 16 2Z"></path><path d="M16 10C17.1046 10 18 10.8954 18 12C18 13.1046 17.1046 14 16 14C14.8954 14 14 13.1046 14 12C14 10.8954 14.8954 10 16 10Z"></path><path d="M8 18C9.10457 18 10 18.8954 10 20C10 21.1046 9.10457 22 8 22C6.89543 22 6 21.1046 6 20C6 18.8954 6.89543 18 8 18Z"></path><path d="M16 18C17.1046 18 18 18.8954 18 20C18 21.1046 17.1046 22 16 22C14.8954 22 14 21.1046 14 20C14 18.8954 14.8954 18 16 18Z"></path><path d="M8 2C9.10457 2 10 2.89543 10 4C10 5.10457 9.10457 6 8 6C6.89543 6 6 5.10457 6 4C6 2.89543 6.89543 2 8 2Z"></path><path d="M8 10C9.10457 10 10 10.8954 10 12C10 13.1046 9.10457 14 8 14C6.89543 14 6 13.1046 6 12C6 10.8954 6.89543 10 8 10Z"></path></svg></div><div class="plyr-item-list"><div class="plyr-queue-ca"><div class="plyr-qimg"><img alt="${e.songName} from Artist Play" width="40" src="${e.imageUrl}" loading="lazy" height="40" /><button aria-label="Play ${e.songName} from Queue Artist" class="btn queue-play" type="button" data-queue-play-id="${e.playId}"><span class="plyr-icon-play"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M232.3,114.3,88.3,26.4a15.5,15.5,0,0,0-16.1-.3A15.8,15.8,0,0,0,64,40V216a15.8,15.8,0,0,0,8.2,13.9,15.5,15.5,0,0,0,16.1-.3l144-87.9a16,16,0,0,0,0-27.4Z"></path></svg></span><span class="plyr-icon-pause"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M216,48V208a16,16,0,0,1-16,16H164a16,16,0,0,1-16-16V48a16,16,0,0,1,16-16h36A16,16,0,0,1,216,48ZM92,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H92a16,16,0,0,0,16-16V48A16,16,0,0,0,92,32Z"></path></svg></span><span class="plyr-equalizer"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 21 24"><line class="equalizer-slide" stroke="#fff" stroke-width="2" x1="3" y1="22" x2="3" y2="2"></line><line class="equalizer-slide" stroke="#fff" stroke-width="2" x1="8" y1="22" x2="8" y2="2"></line><line class="equalizer-slide" stroke="#fff" stroke-width="2" x1="13" y1="22" x2="13" y2="2"></line><line class="equalizer-slide" stroke="#fff" stroke-width="2" x1="18" y1="22" x2="18" y2="2"></line></svg></span></button></div><div class="plyr-qinfo"><span class="plyr-qsn">${e.songName}</span><div class="f ai-c gap-5 plyr-qan">${e.isExplicit?'<svg class="px-16 pxm-16" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24"><path d="M3 3v18h18V3H3zm13 6h-6v2h6v2h-6v2h6v2H8V7h8v2z"></path></svg>':""}<span class="artistMeta">${e.artist}</span></div></div></div></div><div class="f ai-c jc-c plyr-item-list"><button class="rmM" data-remove-song-id="${e.playId}" aria-label="Artist: Remove ${e.songName} from Queue" type="button"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 768 768"><g><path d="M655.5,112.5C582.9,39.9,486.6,0,384,0S185.1,39.9,112.5,112.5S0,281.4,0,384s39.9,198.9,112.5,271.5S281.4,768,384,768 s198.9-39.9,271.5-112.5S768,486.6,768,384S728.1,185.1,655.5,112.5z M624.6,624.6C560.3,689,474.8,724.4,384,724.4 S207.7,689,143.4,624.6C10.7,492,10.7,276,143.4,143.4C207.7,79,293.2,43.6,384,43.6S560.3,79,624.6,143.4 C757.3,276,757.3,492,624.6,624.6z"></path><path d="M553.2,214.8c-8.6-8.6-22.3-8.6-30.9,0L384,353.1L245.7,214.8c-8.6-8.6-22.3-8.6-30.9,0c-8.6,8.6-8.6,22.3,0,30.9 L353.1,384L214.8,522.3c-8.6,8.6-8.6,22.3,0,30.9c4.2,4.2,9.9,6.5,15.4,6.5s11.2-2.1,15.4-6.5l138.3-138.3l138.3,138.3 c4.2,4.2,9.9,6.5,15.4,6.5c5.7,0,11.2-2.1,15.4-6.5c8.6-8.6,8.6-22.3,0-30.9L414.9,384l138.3-138.3 C561.8,237.1,561.8,223.4,553.2,214.8z"></path></g></svg></button></div><div class="f ai-c jc-c plyr-item-list"><button class="btn user-like-queue" data-fav-id="${e.playId}" aria-label="Like from Queue Artist: Remove ${e.songName}" type="button"><svg class="hOff fn" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M128,216S28,160,28,92A52,52,0,0,1,128,72h0A52,52,0,0,1,228,92C228,160,128,216,128,216Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path></svg></button></div><div class="plyr-item-list"><span class="plyr-qsd">${e.duration}</span><button class="more-menu" data-morelist-id="${e.playId}" aria-label="More from Queue Artist: ${e.songName}" type="button" data-morelist-type="Song Queue" data-morelist-image="${e.imageUrl}" data-morelist-url="${e.postUrl}" data-morelist-artist="${e.artist}" data-morelist-title="${e.songName}"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 512 512"><path d="M304 256c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zm120-48c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48zm-336 0c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z"></path></svg></button></div></article>`,c.appendChild(a)})),updateQueueData();const g=u[0],w=document.getElementById("p-img");w&&(w.style.backgroundImage=`url("${g.imageUrl}")`);const f=document.getElementById("p-title");f&&(f.innerHTML=`<a class="domLoadContent" data-dom-id="${g.playId}" href="${g.postUrl}" data-dom-type="Post">${g.songName}</a>`);const b=document.getElementById("p-artist");if(b){const e=g.artist||"",t=e.split(",").map((e=>e.trim())).filter((e=>e.length)).map((e=>{const t=e;return`<a class="domLoadContent" data-dom-type="Post" data-dom-auto="Artist" data-dom-id="false" href="${"/search?q="+encodeURIComponent(e)}">${t}</a>`})).join(", ");b.innerHTML=t}const h=document.getElementById("p-fav");h&&h.setAttribute("data-fav-id",g.playId);const v=document.getElementById("p-more");v&&(v.setAttribute("data-morelist-id",g.playId),v.setAttribute("data-morelist-type","Player"));const A=document.getElementById("music");A&&(window.ytPlayer?window.ytPlayer.loadVideoById(g.musicId):(A.innerHTML=`<iframe id="youtube-player" class="w-full" src="https://www.youtube-nocookie.com/embed/${g.musicId}?&controls=0&disablekb=1&enablejsapi=1&iv_load_policy=3&modestbranding=1&playsinline=1&rel=0&showinfo=0&autoplay=1&mute=0&start=0" allowfullscreen allow="autoplay; encrypted-media; picture-in-picture"></iframe>`,e().then((e=>{window.ytPlayer=new e.Player("youtube-player",{events:{onReady:function(e){window.paceLoader.animate(),document.documentElement.classList.add("is-initializing"),e.target.playVideo(),applyPlayerItemColor(),requestAnimationFrame(window.updateTime)},onStateChange:function(t){if(window.paceLoader.remove(),document.documentElement.classList.remove("is-initializing","is-playing","is-paused","is-buffering"),t.data===e.PlayerState.PLAYING)document.documentElement.classList.add("is-playing"),requestAnimationFrame(window.updateTime);else if(t.data===e.PlayerState.PAUSED)document.documentElement.classList.add("is-paused");else if(t.data===e.PlayerState.BUFFERING)document.documentElement.classList.add("is-buffering");else if(t.data===e.PlayerState.ENDED){const e=localStorage.getItem("repeat_song");if("1"===e)window.ytPlayer.seekTo(0,!0),window.ytPlayer.playVideo();else if("2"===e){if(document.querySelectorAll("#queue li.plyr-item").length<=1)window.ytPlayer.seekTo(0,!0),window.ytPlayer.playVideo();else{let e=document.querySelector("#queue li.plyr-item.is-current").nextElementSibling;for(;e&&!e.classList.contains("plyr-item");)e=e.nextElementSibling;if(e)d(e.querySelector("[data-queue-play-id]"));else{const e=document.querySelector("#queue li.plyr-item:first-child");if(e){const t=e.querySelector("[data-queue-play-id]");t&&(d(t),o())}}}}else playNextSong();requestAnimationFrame(window.updateTime)}}}})})).catch((e=>{console.error("Error initializing the YouTube Player for Artist:",e)})))),document.getElementById("player")&&document.getElementById("player").classList.remove("hidden"),window.rightTimeEl&&(window.rightTimeEl.innerHTML=g.duration),window.leftTimeEl&&(window.leftTimeEl.innerHTML="0:00"),window.togglePlay&&(window.togglePlay.classList.add("is-pressed"),window.togglePlay.setAttribute("aria-pressed","true")),requestAnimationFrame(window.updateTime)}catch(e){console.error("Error in Artist flow:",e)}}document.addEventListener("click",(function(t){const a=t.target.closest("button[data-play-id]");if(!a)return;t.preventDefault();const i=a.getAttribute("data-play-id");if(document.documentElement.getAttribute("data-music-playing")===i&&window.ytPlayer&&"function"==typeof window.ytPlayer.getPlayerState){const e=window.ytPlayer.getPlayerState(),t=a;e===YT.PlayerState.PLAYING?(window.ytPlayer.pauseVideo(),t.classList.add("paused"),t.setAttribute("aria-pressed","false")):e!==YT.PlayerState.PAUSED&&e!==YT.PlayerState.ENDED||(e===YT.PlayerState.ENDED&&window.ytPlayer.seekTo(0,!0),window.ytPlayer.playVideo(),t.classList.remove("paused"),t.setAttribute("aria-pressed","true"))}else"Favorite"!==a.getAttribute("data-is-played-from")?"Artist"!==a.getAttribute("data-play-from")?"MoreSongs"!==a.getAttribute("data-play-from")?async function(){try{const t=a.getAttribute("data-play-id"),i=`/feeds/posts/default/${t}?alt=json`,n=await fetch(i);if(!n.ok)throw new Error("Network response was not ok");const s=await n.json(),r=s.entry;if(!r)return void console.error("No entry object in fetched data:",s);const l=s.entry.content.$t,u=new DOMParser,c=u.parseFromString(l,"text/html").querySelector("#post-song-data");if(!c)return void console.error("Song data element not found in the fetched HTML.");const m=c.getAttribute("data-music"),y=c.getAttribute("data-image"),p=c.getAttribute("data-title-name"),g=c.getAttribute("data-artist"),w=(c.getAttribute("data-lyricist"),c.getAttribute("data-composer"),c.getAttribute("data-cast")),f=c.getAttribute("data-language"),b=c.getAttribute("data-mood"),h=c.getAttribute("data-song-type"),v=c.getAttribute("data-genre"),A=c.getAttribute("data-duration"),P=(c.getAttribute("data-release-date"),c.getAttribute("data-year")),E=(c.getAttribute("data-label"),c.getAttribute("data-movie"));let L="";if(Array.isArray(r.link)){const e=r.link.find((e=>"alternate"===e.rel&&e.href));e&&(L=e.href)}L||(L="#");let S=!1;Array.isArray(r.category)&&(S=r.category.some((e=>"explicit"===e?.term?.toLowerCase())));const q=document.createElement("li");q.className="plyr-item is-current",q.setAttribute("data-queue-id",t),q.setAttribute("data-music-id",m),q.setAttribute("data-song-source",L),v&&q.setAttribute("data-genre",v),q.innerHTML=`<article class="f ai-c plyr-list-item-inner"><div class="f ai-c jc-c plyr-item-list dragQ"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24"><path d="M16 2C17.1046 2 18 2.89543 18 4C18 5.10457 17.1046 6 16 6C14.8954 6 14 5.10457 14 4C14 2.89543 14.8954 2 16 2Z"></path><path d="M16 10C17.1046 10 18 10.8954 18 12C18 13.1046 17.1046 14 16 14C14.8954 14 14 13.1046 14 12C14 10.8954 14.8954 10 16 10Z"></path><path d="M8 18C9.10457 18 10 18.8954 10 20C10 21.1046 9.10457 22 8 22C6.89543 22 6 21.1046 6 20C6 18.8954 6.89543 18 8 18Z"></path><path d="M16 18C17.1046 18 18 18.8954 18 20C18 21.1046 17.1046 22 16 22C14.8954 22 14 21.1046 14 20C14 18.8954 14.8954 18 16 18Z"></path><path d="M8 2C9.10457 2 10 2.89543 10 4C10 5.10457 9.10457 6 8 6C6.89543 6 6 5.10457 6 4C6 2.89543 6.89543 2 8 2Z"></path><path d="M8 10C9.10457 10 10 10.8954 10 12C10 13.1046 9.10457 14 8 14C6.89543 14 6 13.1046 6 12C6 10.8954 6.89543 10 8 10Z"></path></svg></div><div class="plyr-item-list"><div class="plyr-queue-ca"><div class="plyr-qimg"><img alt="${p} from Song Image" width="40" src="${y}" loading="lazy" height="40" /><button aria-label="Play Song: ${p}" class="btn queue-play" type="button" data-queue-play-id="${t}"><span class="plyr-icon-play"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M232.3,114.3,88.3,26.4a15.5,15.5,0,0,0-16.1-.3A15.8,15.8,0,0,0,64,40V216a15.8,15.8,0,0,0,8.2,13.9,15.5,15.5,0,0,0,16.1-.3l144-87.9a16,16,0,0,0,0-27.4Z"></path></svg></span><span class="plyr-icon-pause"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M216,48V208a16,16,0,0,1-16,16H164a16,16,0,0,1-16-16V48a16,16,0,0,1,16-16h36A16,16,0,0,1,216,48ZM92,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H92a16,16,0,0,0,16-16V48A16,16,0,0,0,92,32Z"></path></svg></span><span class="plyr-equalizer"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 21 24"><line class="equalizer-slide" stroke="#fff" stroke-width="2" x1="3" y1="22" x2="3" y2="2"></line><line class="equalizer-slide" stroke="#fff" stroke-width="2" x1="8" y1="22" x2="8" y2="2"></line><line class="equalizer-slide" stroke="#fff" stroke-width="2" x1="13" y1="22" x2="13" y2="2"></line><line class="equalizer-slide" stroke="#fff" stroke-width="2" x1="18" y1="22" x2="18" y2="2"></line></svg></span></button></div><div class="plyr-qinfo"><span class="plyr-qsn">${p}</span><div class="f ai-c gap-5 plyr-qan">${S?'<svg class="px-16 pxm-16" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24"><path d="M3 3v18h18V3H3zm13 6h-6v2h6v2h-6v2h6v2H8V7h8v2z"></path></svg>':""}<span class="artistMeta">${g}</span></div></div></div></div><div class="f ai-c jc-c plyr-item-list"><button class="rmM" data-remove-song-id="${t}" aria-label="Remove Song from Queue: ${p}" type="button"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 768 768"><g><path d="M655.5,112.5C582.9,39.9,486.6,0,384,0S185.1,39.9,112.5,112.5S0,281.4,0,384s39.9,198.9,112.5,271.5S281.4,768,384,768 s198.9-39.9,271.5-112.5S768,486.6,768,384S728.1,185.1,655.5,112.5z M624.6,624.6C560.3,689,474.8,724.4,384,724.4 S207.7,689,143.4,624.6C10.7,492,10.7,276,143.4,143.4C207.7,79,293.2,43.6,384,43.6S560.3,79,624.6,143.4 C757.3,276,757.3,492,624.6,624.6z"></path><path d="M553.2,214.8c-8.6-8.6-22.3-8.6-30.9,0L384,353.1L245.7,214.8c-8.6-8.6-22.3-8.6-30.9,0c-8.6,8.6-8.6,22.3,0,30.9 L353.1,384L214.8,522.3c-8.6,8.6-8.6,22.3,0,30.9c4.2,4.2,9.9,6.5,15.4,6.5s11.2-2.1,15.4-6.5l138.3-138.3l138.3,138.3 c4.2,4.2,9.9,6.5,15.4,6.5c5.7,0,11.2-2.1,15.4-6.5c8.6-8.6,8.6-22.3,0-30.9L414.9,384l138.3-138.3 C561.8,237.1,561.8,223.4,553.2,214.8z"></path></g></svg></button></div><div class="f ai-c jc-c plyr-item-list"><button class="btn user-like-queue" data-fav-id="${t}" aria-label="Like from Queue: ${p}" type="button"><svg class="hOff fn" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M128,216S28,160,28,92A52,52,0,0,1,128,72h0A52,52,0,0,1,228,92C228,160,128,216,128,216Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path></svg></button></div><div class="plyr-item-list"><span class="plyr-qsd">${A}</span>\n<button class="more-menu" data-morelist-id="${t}" aria-label="More from Queue: ${p}" type="button" data-morelist-type="Song Queue" data-morelist-image="${y}" data-morelist-url="${L}" data-morelist-artist="${g}" data-morelist-title="${p}"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 512 512"><path d="M304 256c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zm120-48c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48zm-336 0c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z"></path></svg></button></div></article>`;const I=document.getElementById("queue");if(I){I.innerHTML="",I.appendChild(q),I.setAttribute("data-lang-queue",f),I.setAttribute("data-type-queue",h),I.setAttribute("data-type-year",P),E?I.setAttribute("data-movie-queue-name",E):I.removeAttribute("data-movie-queue-name"),I.setAttribute("data-is-played-from",a.getAttribute("data-play-from")||"");let e=[];b&&e.push(b),g&&e.push(...g.split(",").map((e=>e.trim()))),w&&e.push(...w.split(",").map((e=>e.trim()))),v&&e.push(v),e=[...new Set(e)],I.setAttribute("data-queue-meta",`[${e.join(",")}]`)}const C=document.getElementById("p-img");C&&(C.style.backgroundImage=`url("${y}")`);const T=document.getElementById("p-title");T&&(T.innerHTML=`<a class="domLoadContent" data-dom-id="${t}" href="${L}" data-dom-type="Post">${p}</a>`);const k=document.getElementById("p-artist");if(k){const e=(g||"").split(",").map((e=>e.trim())).filter((e=>e.length)).map((e=>{const t=e;return`<a class="domLoadContent" data-dom-type="Post" data-dom-auto="Artist" data-dom-id="false" href="${"/search?q="+encodeURIComponent(e)}">${t}</a>`})).join(", ");k.innerHTML=e}const M=document.getElementById("p-fav");M&&M.setAttribute("data-fav-id",t);const B=document.getElementById("p-more");B&&(B.setAttribute("data-morelist-id",t),B.setAttribute("data-morelist-type","Player"));const x=document.getElementById("music");x&&(window.ytPlayer?window.ytPlayer.loadVideoById(m):(x.innerHTML=`<iframe id="youtube-player" class="w-full" src="https://www.youtube-nocookie.com/embed/${m}?&controls=0&disablekb=1&enablejsapi=1&iv_load_policy=3&modestbranding=1&playsinline=1&rel=0&showinfo=0&autoplay=1&mute=0&start=0" allowfullscreen allow="autoplay; encrypted-media; picture-in-picture"></iframe>`,e().then((e=>{window.ytPlayer=new e.Player("youtube-player",{events:{onReady:function(e){window.paceLoader.animate(),document.documentElement.classList.add("is-initializing"),e.target.playVideo(),applyPlayerItemColor(),requestAnimationFrame(window.updateTime)},onStateChange:function(t){if(window.paceLoader.remove(),document.documentElement.classList.remove("is-initializing","is-playing","is-paused","is-buffering"),t.data===e.PlayerState.PLAYING)document.documentElement.classList.add("is-playing"),requestAnimationFrame(window.updateTime);else if(t.data===e.PlayerState.PAUSED)document.documentElement.classList.add("is-paused");else if(t.data===e.PlayerState.BUFFERING)document.documentElement.classList.add("is-buffering");else if(t.data===e.PlayerState.ENDED){const e=localStorage.getItem("repeat_song");if("1"===e)window.ytPlayer.seekTo(0,!0),window.ytPlayer.playVideo();else if("2"===e){if(document.querySelectorAll("#queue li.plyr-item").length<=1)window.ytPlayer.seekTo(0,!0),window.ytPlayer.playVideo();else{let e=document.querySelector("#queue li.plyr-item.is-current").nextElementSibling;for(;e&&!e.classList.contains("plyr-item");)e=e.nextElementSibling;if(e)d(e.querySelector("[data-queue-play-id]"));else{const e=document.getElementById("queue").querySelector("li.plyr-item:first-child");if(e){const t=e.querySelector("[data-queue-play-id]");t&&(d(t),o())}}}}else playNextSong();requestAnimationFrame(window.updateTime)}}}})})).catch((e=>{console.error("Error initializing the YouTube Player:",e)})))),document.getElementById("player")&&document.getElementById("player").classList.remove("hidden"),window.rightTimeEl&&(window.rightTimeEl.innerHTML=A),window.leftTimeEl&&(window.leftTimeEl.innerHTML="0:00"),window.togglePlay&&(window.togglePlay.classList.add("is-pressed"),window.togglePlay.setAttribute("aria-pressed","true")),fetchAndFilterSongs()}catch(e){console.error("Error fetching or processing song data:",e)}}():async function(t){try{const a=t.getAttribute("data-play-id"),i=`/feeds/posts/default/${a}?alt=json`,n=await fetch(i);if(!n.ok)throw new Error("Network response was not ok");const s=await n.json(),r=s.entry;if(!r)return void console.error("No entry object in fetched data:",s);const l=s.entry.content.$t,u=(new DOMParser).parseFromString(l,"text/html").querySelector("#post-song-data");if(!u)return void console.error("Song data element not found in the fetched HTML.");const c=u.getAttribute("data-music"),m=u.getAttribute("data-image"),y=u.getAttribute("data-title-name"),p=u.getAttribute("data-artist"),g=(u.getAttribute("data-lyricist"),u.getAttribute("data-composer"),u.getAttribute("data-cast")),w=u.getAttribute("data-language"),f=u.getAttribute("data-mood"),b=u.getAttribute("data-song-type"),h=u.getAttribute("data-genre"),v=u.getAttribute("data-duration"),A=(u.getAttribute("data-release-date"),u.getAttribute("data-year")),P=(u.getAttribute("data-label"),u.getAttribute("data-movie"));let E="";if(Array.isArray(r.link)){const e=r.link.find((e=>"alternate"===e.rel&&e.href));e&&(E=e.href)}E||(E="#");let L=!1;Array.isArray(r.category)&&(L=r.category.some((e=>"explicit"===e?.term?.toLowerCase())));const S=document.createElement("li");S.className="plyr-item is-current",S.setAttribute("data-queue-id",a),S.setAttribute("data-music-id",c),S.setAttribute("data-song-source",E),h&&S.setAttribute("data-genre",h),S.innerHTML=`<article class="f ai-c plyr-list-item-inner"><div class="f ai-c jc-c plyr-item-list dragQ"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24"><path d="M16 2C17.1046 2 18 2.89543 18 4C18 5.10457 17.1046 6 16 6C14.8954 6 14 5.10457 14 4C14 2.89543 14.8954 2 16 2Z"></path><path d="M16 10C17.1046 10 18 10.8954 18 12C18 13.1046 17.1046 14 16 14C14.8954 14 14 13.1046 14 12C14 10.8954 14.8954 10 16 10Z"></path><path d="M8 18C9.10457 18 10 18.8954 10 20C10 21.1046 9.10457 22 8 22C6.89543 22 6 21.1046 6 20C6 18.8954 6.89543 18 8 18Z"></path><path d="M16 18C17.1046 18 18 18.8954 18 20C18 21.1046 17.1046 22 16 22C14.8954 22 14 21.1046 14 20C14 18.8954 14.8954 18 16 18Z"></path><path d="M8 2C9.10457 2 10 2.89543 10 4C10 5.10457 9.10457 6 8 6C6.89543 6 6 5.10457 6 4C6 2.89543 6.89543 2 8 2Z"></path><path d="M8 10C9.10457 10 10 10.8954 10 12C10 13.1046 9.10457 14 8 14C6.89543 14 6 13.1046 6 12C6 10.8954 6.89543 10 8 10Z"></path></svg></div><div class="plyr-item-list"><div class="plyr-queue-ca"><div class="plyr-qimg"><img alt="${y} from Post More Image" width="40" src="${m}" loading="lazy" height="40" /><button aria-label="Play Song: ${y} from Post More" class="btn queue-play" type="button" data-queue-play-id="${a}"><span class="plyr-icon-play"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M232.3,114.3,88.3,26.4a15.5,15.5,0,0,0-16.1-.3A15.8,15.8,0,0,0,64,40V216a15.8,15.8,0,0,0,8.2,13.9,15.5,15.5,0,0,0,16.1-.3l144-87.9a16,16,0,0,0,0-27.4Z"></path></svg></span><span class="plyr-icon-pause"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M216,48V208a16,16,0,0,1-16,16H164a16,16,0,0,1-16-16V48a16,16,0,0,1,16-16h36A16,16,0,0,1,216,48ZM92,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H92a16,16,0,0,0,16-16V48A16,16,0,0,0,92,32Z"></path></svg></span><span class="plyr-equalizer"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 21 24"><line class="equalizer-slide" stroke="#fff" stroke-width="2" x1="3" y1="22" x2="3" y2="2"></line><line class="equalizer-slide" stroke="#fff" stroke-width="2" x1="8" y1="22" x2="8" y2="2"></line><line class="equalizer-slide" stroke="#fff" stroke-width="2" x1="13" y1="22" x2="13" y2="2"></line><line class="equalizer-slide" stroke="#fff" stroke-width="2" x1="18" y1="22" x2="18" y2="2"></line></svg></span></button></div><div class="plyr-qinfo"><span class="plyr-qsn">${y}</span><div class="f ai-c gap-5 plyr-qan">${L?'<svg class="px-16 pxm-16" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24"><path d="M3 3v18h18V3H3zm13 6h-6v2h6v2h-6v2h6v2H8V7h8v2z"></path></svg>':""}<span class="artistMeta">${p}</span></div></div></div></div><div class="f ai-c jc-c plyr-item-list"><button class="rmM" data-remove-song-id="${a}" aria-label="Remove Song from Queue Post More: ${y}" type="button"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 768 768"><g><path d="M655.5,112.5C582.9,39.9,486.6,0,384,0S185.1,39.9,112.5,112.5S0,281.4,0,384s39.9,198.9,112.5,271.5S281.4,768,384,768 s198.9-39.9,271.5-112.5S768,486.6,768,384S728.1,185.1,655.5,112.5z M624.6,624.6C560.3,689,474.8,724.4,384,724.4 S207.7,689,143.4,624.6C10.7,492,10.7,276,143.4,143.4C207.7,79,293.2,43.6,384,43.6S560.3,79,624.6,143.4 C757.3,276,757.3,492,624.6,624.6z"></path><path d="M553.2,214.8c-8.6-8.6-22.3-8.6-30.9,0L384,353.1L245.7,214.8c-8.6-8.6-22.3-8.6-30.9,0c-8.6,8.6-8.6,22.3,0,30.9 L353.1,384L214.8,522.3c-8.6,8.6-8.6,22.3,0,30.9c4.2,4.2,9.9,6.5,15.4,6.5s11.2-2.1,15.4-6.5l138.3-138.3l138.3,138.3 c4.2,4.2,9.9,6.5,15.4,6.5c5.7,0,11.2-2.1,15.4-6.5c8.6-8.6,8.6-22.3,0-30.9L414.9,384l138.3-138.3 C561.8,237.1,561.8,223.4,553.2,214.8z"></path></g></svg></button></div><div class="f ai-c jc-c plyr-item-list"><button class="btn user-like-queue" aria-hidden="true" focusable="false" role="presentation" data-fav-id="${a}" aria-label="Like from Queue Post More: ${y}" type="button"><svg class="hOff fn" viewBox="0 0 256 256"><path d="M128,216S28,160,28,92A52,52,0,0,1,128,72h0A52,52,0,0,1,228,92C228,160,128,216,128,216Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path></svg></button></div><div class="plyr-item-list"><span class="plyr-qsd">${v}</span>\n<button class="more-menu" data-morelist-id="${a}" aria-label="More from Queue Post More: ${y}" type="button" data-morelist-type="Song Queue" data-morelist-image="${m}" data-morelist-url="${E}" data-morelist-artist="${p}" data-morelist-title="${y}"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 512 512"><path d="M304 256c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zm120-48c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48zm-336 0c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z"></path></svg></button></div></article>`;const q=document.getElementById("queue");if(q){q.innerHTML="",q.appendChild(S),q.setAttribute("data-lang-queue",w),q.setAttribute("data-type-queue",b),q.setAttribute("data-type-year",A),P?q.setAttribute("data-movie-queue-name",P):q.removeAttribute("data-movie-queue-name"),q.setAttribute("data-is-played-from",t.getAttribute("data-play-from")||"");let e=[];f&&e.push(f),p&&e.push(...p.split(",").map((e=>e.trim()))),g&&e.push(...g.split(",").map((e=>e.trim()))),h&&e.push(h),e=[...new Set(e)],q.setAttribute("data-queue-meta",`[${e.join(",")}]`)}const I=document.getElementById("p-img");I&&(I.style.backgroundImage=`url("${m}")`);const C=document.getElementById("p-title");C&&(C.innerHTML=`<a class="domLoadContent" data-dom-id="${a}" href="${E}" data-dom-type="Post">${y}</a>`);const T=document.getElementById("p-artist");if(T){const e=(p||"").split(",").map((e=>e.trim())).filter((e=>e.length)).map((e=>{const t=e;return`<a class="domLoadContent" data-dom-type="Post" data-dom-auto="Artist" data-dom-id="false" href="${"/search?q="+encodeURIComponent(e)}">${t}</a>`})).join(", ");T.innerHTML=e}const k=document.getElementById("p-fav");k&&k.setAttribute("data-fav-id",a);const M=document.getElementById("p-more");M&&(M.setAttribute("data-morelist-id",a),M.setAttribute("data-morelist-type","Player"));const B=document.getElementById("music");B&&(window.ytPlayer?window.ytPlayer.loadVideoById(c):(B.innerHTML=`<iframe id="youtube-player" class="w-full" src="https://www.youtube-nocookie.com/embed/${c}?&controls=0&disablekb=1&enablejsapi=1&iv_load_policy=3&modestbranding=1&playsinline=1&rel=0&showinfo=0&autoplay=1&mute=0&start=0" allowfullscreen allow="autoplay; encrypted-media; picture-in-picture"></iframe>`,e().then((e=>{window.ytPlayer=new e.Player("youtube-player",{events:{onReady:function(e){window.paceLoader.animate(),document.documentElement.classList.add("is-initializing"),e.target.playVideo(),applyPlayerItemColor(),requestAnimationFrame(window.updateTime)},onStateChange:function(t){if(window.paceLoader.remove(),document.documentElement.classList.remove("is-initializing","is-playing","is-paused","is-buffering"),t.data===e.PlayerState.PLAYING)document.documentElement.classList.add("is-playing"),requestAnimationFrame(window.updateTime);else if(t.data===e.PlayerState.PAUSED)document.documentElement.classList.add("is-paused");else if(t.data===e.PlayerState.BUFFERING)document.documentElement.classList.add("is-buffering");else if(t.data===e.PlayerState.ENDED){const e=localStorage.getItem("repeat_song");if("1"===e)window.ytPlayer.seekTo(0,!0),window.ytPlayer.playVideo();else if("2"===e)if(document.querySelectorAll("#queue li.plyr-item").length<=1)window.ytPlayer.seekTo(0,!0),window.ytPlayer.playVideo();else{let e=document.querySelector("#queue li.plyr-item.is-current").nextElementSibling;for(;e&&!e.classList.contains("plyr-item");)e=e.nextElementSibling;if(e)d(e.querySelector("[data-queue-play-id]"));else{const e=document.getElementById("queue").querySelector("li.plyr-item:first-child");if(e){const t=e.querySelector("[data-queue-play-id]");t&&(d(t),o())}}}else playNextSong();requestAnimationFrame(window.updateTime)}}}})})).catch((e=>{console.error("Error initializing the YouTube Player:",e)})))),document.getElementById("player")&&document.getElementById("player").classList.remove("hidden"),window.rightTimeEl&&(window.rightTimeEl.innerHTML=v),window.leftTimeEl&&(window.leftTimeEl.innerHTML="0:00"),window.togglePlay&&(window.togglePlay.classList.add("is-pressed"),window.togglePlay.setAttribute("aria-pressed","true")),fetchAndFilterSongs(!0)}catch(e){console.error("Error fetching or processing song data:",e)}}(a):c(a):loadAndPlayFavoriteSong()})),function(){const e=document.querySelector('[data-plyr="mute"]'),t=document.querySelector('[data-plyr="volume"]');if(!e||!t)return;function a(e){const a=100*e;t.style.setProperty("--value",a+"%"),t.setAttribute("aria-valuenow",a),t.setAttribute("aria-valuetext",function(e){return(100*e).toFixed(1)+"%"}(e)),t.value=e}function i(e){window.ytPlayer&&"function"==typeof window.ytPlayer.setVolume&&window.ytPlayer.setVolume(100*e)}let o=localStorage.getItem("plyr_volume"),n=null!==o?parseFloat(o):1;0===n?(e.classList.add("is-pressed"),e.setAttribute("aria-pressed","true")):(e.classList.remove("is-pressed"),e.setAttribute("aria-pressed","false")),a(n),i(n);let s=n>0?n:1;t.addEventListener("input",(function(t){const o=parseFloat(t.target.value);a(o),i(o),localStorage.setItem("plyr_volume",o),0===o?(e.classList.add("is-pressed"),e.setAttribute("aria-pressed","true")):(s=o,e.classList.remove("is-pressed"),e.setAttribute("aria-pressed","false"))})),e.addEventListener("click",(function(){e.classList.contains("is-pressed")?(e.classList.remove("is-pressed"),e.setAttribute("aria-pressed","false"),n=s>0?s:1,a(n),i(n),localStorage.setItem("plyr_volume",n)):(s=parseFloat(t.value)||1,e.classList.add("is-pressed"),e.setAttribute("aria-pressed","true"),n=0,a(0),i(0),localStorage.setItem("plyr_volume",0))}))}()}function d(t){const a=t.getAttribute("data-queue-play-id");document.documentElement.setAttribute("data-music-playing",a);const i=t.getAttribute("data-queue-play-id"),n=t.closest("li.plyr-item"),s=n.classList.contains("is-current");if(!window.__QUEUE_DATA__||!Array.isArray(window.__QUEUE_DATA__.songs))return void console.error("Queue data is not available.");if(s){if(window.ytPlayer&&"function"==typeof window.ytPlayer.getPlayerState){const e=window.ytPlayer.getPlayerState();e===YT.PlayerState.ENDED?(window.ytPlayer.seekTo(0,!0),window.ytPlayer.playVideo(),n.classList.remove("paused"),window.togglePlay&&(window.togglePlay.classList.add("is-pressed"),window.togglePlay.setAttribute("aria-pressed","true"))):e===YT.PlayerState.PLAYING?(window.ytPlayer.pauseVideo(),n.classList.add("paused"),window.togglePlay&&(window.togglePlay.classList.remove("is-pressed"),window.togglePlay.setAttribute("aria-pressed","false"))):e===YT.PlayerState.PAUSED&&(window.ytPlayer.playVideo(),n.classList.remove("paused"),window.togglePlay&&(window.togglePlay.classList.add("is-pressed"),window.togglePlay.setAttribute("aria-pressed","true")))}return}document.querySelectorAll("#queue li.plyr-item.is-current").forEach((e=>{e.classList.remove("is-current","paused")})),n.classList.add("is-current");const r=window.__QUEUE_DATA__.songs.find((e=>e.id===i));if(!r)return void console.error(`Song with id ${i} not found in queue.`);const l=document.getElementById("p-img");l&&(l.style.backgroundImage=`url("${r.image}")`);const u=document.getElementById("p-title");u&&(u.innerHTML=`<a class="domLoadContent" data-dom-id="${i}" href="${r.source}" data-dom-type="Post">${r.title}</a>`);const c=document.getElementById("p-artist");if(c){const e=(r.artist||"").split(",").map((e=>e.trim())).filter((e=>e.length)).map((e=>{const t=e;return`<a class="domLoadContent" data-dom-type="Post" data-dom-auto="Artist" data-dom-id="false" href="${"/search?q="+encodeURIComponent(e)}">${t}</a>`})).join(", ");c.innerHTML=e}const m=document.getElementById("p-fav");m&&m.setAttribute("data-fav-id",i);const y=document.getElementById("p-more");y&&(y.setAttribute("data-morelist-id",i),y.setAttribute("data-morelist-type","Player"));const p=document.getElementById("music");p&&(window.ytPlayer?window.ytPlayer.loadVideoById(r.playID):(p.innerHTML=`<iframe id="youtube-player" class="w-full" src="https://www.youtube-nocookie.com/embed/${r.playID}?&controls=0&disablekb=1&enablejsapi=1&iv_load_policy=3&modestbranding=1&playsinline=1&rel=0&showinfo=0&autoplay=1&mute=0&start=0" allowfullscreen allow="autoplay; encrypted-media; picture-in-picture"></iframe>`,e().then((e=>{window.ytPlayer=new e.Player("youtube-player",{events:{onReady:function(e){window.paceLoader.animate(),document.documentElement.classList.add("is-initializing"),e.target.playVideo(),requestAnimationFrame(window.updateTime)},onStateChange:function(t){if(window.paceLoader.remove(),document.documentElement.classList.remove("is-initializing","is-playing","is-paused","is-buffering"),t.data===e.PlayerState.PLAYING)document.documentElement.classList.add("is-playing"),window.togglePlay&&(window.togglePlay.classList.add("is-pressed"),window.togglePlay.setAttribute("aria-pressed","true")),requestAnimationFrame(window.updateTime);else if(t.data===e.PlayerState.PAUSED)document.documentElement.classList.add("is-paused"),window.togglePlay&&(window.togglePlay.classList.remove("is-pressed"),window.togglePlay.setAttribute("aria-pressed","false"));else if(t.data===e.PlayerState.BUFFERING)document.documentElement.classList.add("is-buffering");else if(t.data===e.PlayerState.ENDED){const e=localStorage.getItem("repeat_song");if("1"===e)window.ytPlayer.seekTo(0,!0),window.ytPlayer.playVideo();else if("2"===e){if(document.querySelectorAll("#queue li.plyr-item").length<=1)window.ytPlayer.seekTo(0,!0),window.ytPlayer.playVideo();else{let e=document.querySelector("#queue li.plyr-item.is-current").nextElementSibling;for(;e&&!e.classList.contains("plyr-item");)e=e.nextElementSibling;if(e)d(e.querySelector("[data-queue-play-id]"));else{const e=document.getElementById("queue").querySelector("li.plyr-item:first-child");if(e){const t=e.querySelector("[data-queue-play-id]");document.documentElement.setAttribute("data-music-playing",nextBtn.getAttribute("data-queue-play-id")),t&&(d(t),o())}}}}else playNextSong();requestAnimationFrame(window.updateTime)}}}})})).catch((e=>{console.error("Error initializing the YouTube Player:",e)}))))}window.playNextSong=function(){const e=document.getElementById("queue");if(!e)return;const t=e.querySelector("li.plyr-item.is-current");if(!t)return;let a=t.nextElementSibling;const i=localStorage.getItem("repeat_song");for(;a&&!a.classList.contains("plyr-item");)a=a.nextElementSibling;if(!a){if("2"!==i)return void o();a=e.querySelector("li.plyr-item:first-child")}const s=a.querySelector("[data-queue-play-id]");s&&(d(s),o(),n())},document.addEventListener("click",(function(e){const t=e.target.closest(".queue-play");t&&(e.preventDefault(),d(t),o(),n())})),document.addEventListener("click",(function(e){const t=e.target.closest(".fav-play-user");if(!t)return;e.preventDefault();const a=t.getAttribute("data-fav-play-id");if(!a)return;const i=document.querySelector("#queue li.plyr-item.is-current");a===(i?i.getAttribute("data-queue-id"):null)?document.documentElement.classList.contains("is-playing")?(window.ytPlayer&&"function"==typeof window.ytPlayer.pauseVideo&&window.ytPlayer.pauseVideo(),document.documentElement.classList.remove("is-playing"),document.documentElement.classList.add("is-paused")):document.documentElement.classList.contains("is-paused")&&(window.ytPlayer&&"function"==typeof window.ytPlayer.playVideo&&window.ytPlayer.playVideo(),document.documentElement.classList.remove("is-paused"),document.documentElement.classList.add("is-playing")):(loadAndPlayFavoriteSong(a),document.documentElement.classList.remove("is-paused"),document.documentElement.classList.add("is-playing"))})),function(){const e=document.getElementById("queue");if(!e)return;new MutationObserver((()=>{updateFavButtonStatus()})).observe(e,{attributes:!0,subtree:!0,attributeFilter:["class"]})}(),window.loadYouTubeAPI=e,window.repeatSong=i,window.shuffleSong=a,window.updateShuffleButtonState=t,window.nextQueueSong=s,window.previousSongPlay=r,window.updatePreviousButtonState=n,window.updateNextButtonState=o,window.initializePlayer=l,i(),a(),t(),s(),r(),n(),o(),l()}();
