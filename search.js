!function(){const t={};let e="",a=null;const s=new WeakMap;function i(t){if(!t.content||!t.content.$t)return null;const e=document.createElement("div");e.innerHTML=t.content.$t;const a=e.querySelector("#post-song-data");if(a)return{image:a.getAttribute("data-image")||"https://cdn.metrodhun.com/default-song-500x500.jpg",title:a.getAttribute("data-title-name")||t.title&&t.title.$t||"",artistRaw:a.getAttribute("data-artist")||"",composerRaw:a.getAttribute("data-composer")||"",language:a.getAttribute("data-language")||"",genre:a.getAttribute("data-genre")||"",link:(t.link||[]).find((t=>"alternate"===t.rel))?.href||"#"};const s=e.querySelector("#artist-data");return s?{image:s.getAttribute("data-artist-image")||"https://cdn.metrodhun.com/default-500x500.jpg",title:s.getAttribute("data-artist-name")||t.title&&t.title.$t||"",artistRaw:"",composerRaw:"",language:s.getAttribute("data-artist-language")||"",genre:"",link:(t.link||[]).find((t=>"alternate"===t.rel))?.href||"#"}:null}function n(t){return t?t.split(",").map((t=>t.trim())).filter((t=>t)).map((t=>`<a class="domLoadContent" data-dom-type="Post" data-dom-auto="Artist" data-dom-id="false" href="/search?q=${encodeURIComponent(t)}">${t}</a>`)).join(", "):""}function o(t){for(let e=t.length-1;e>0;e--){const a=Math.floor(Math.random()*(e+1));[t[e],t[a]]=[t[a],t[e]]}}const r='<div class="noSongsQueue"><div class="f fdc gap-10 ai-c jc-c noItm"><div class="nItmSvg"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24"><path d="M15.728 14.443a.91.91 0 0 1-1.286 1.286 3.433 3.433 0 0 0-2.443-1.012c-.923 0-1.79.359-2.443 1.012a.909.909 0 1 1-1.286-1.286 5.237 5.237 0 0 1 3.728-1.544 5.234 5.234 0 0 1 3.73 1.544zm-6.75-3.526c.226-.225.355-.538.355-.857s-.129-.631-.355-.857a1.222 1.222 0 0 0-.857-.355c-.319 0-.631.13-.857.355-.225.226-.355.539-.355.857s.13.632.355.857c.225.225.538.355.857.355s.632-.129.857-.355zm6.901-2.069c-.319 0-.631.13-.857.355-.226.226-.355.538-.355.857s.129.632.355.857c.226.225.538.355.857.355s.632-.13.857-.355c.226-.225.355-.538.355-.857s-.129-.631-.355-.857a1.224 1.224 0 0 0-.857-.355zM22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0z"></path></svg></div><div class="f fdc nItmTxt"><span class="qT1">Oops! Nothing found</span><span class="qT2">Looking for a song and can"t find it?</span><span class="qT3">Request it now — we’ll publish the song within 1 day, or even in less than 6 hours!</span></div><button title="Request Song" class="reqS" data-button-type="requestSongBox" type="button">Request Now!</button></div></div>';function d(s,i,n,o){function d(t){return`/feeds/posts/default?max-results=99&q=${encodeURIComponent(s+" Type "+t)}&alt=json`}e=s,a=i,o.textContent="",o.insertAdjacentHTML("afterbegin",'<div class="f ai-c jc-c sLoad loadQ"><div class="f ai-c jc-c loadingSpin"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 32 32" fill="none" stroke-width="3" class="progress-circle indeterminate w-40 h-40"><circle cx="16" cy="16" r="13" role="presentation" stroke-dasharray="81.68 81.68" stroke-dashoffset="0" transform="rotate(-90 16 16)" class="progress-circle-track"></circle><circle cx="16" cy="16" r="13" role="presentation" stroke-dasharray="81.68 81.68" stroke-dashoffset="61.26" transform="rotate(-90 16 16)" class="progress-circle-fill"></circle></svg></div></div>'),t[s]?i.value.trim()===s&&l(t[s],s,i,n,o):Promise.all([fetch(d("Song")).then((t=>t.json())),fetch(d("Artist")).then((t=>t.json())),fetch(d("Main Album")).then((t=>t.json()))]).then((([e,a,r])=>{if(i.value.trim()!==s)return;const d=e.feed.entry||[],c=a.feed.entry||[],p=r.feed.entry||[];let u=null,h="";const m=s.toLowerCase(),v=c.find((t=>t.title.$t.toLowerCase().includes(m)));v?(u=v,h="Artist"):p.length?(u=p[0],h="Album"):c.length?(u=c[0],h="Artist"):d.length&&(u=d[0],h="Song"),fetch(`/feeds/posts/default?max-results=99&q=${encodeURIComponent(s)}&alt=json`).then((t=>t.json())).then((e=>{if(i.value.trim()!==s)return;const a=(e.feed.entry||[]).filter((t=>{const e=(t.category||[]).map((t=>t.term));return e.includes("Song")&&!e.includes("Main Album")})).slice(0,10),r={topEntry:u,topType:h,filteredSongs:a};t[s]=r,i.value.trim()===s&&l(r,s,i,n,o)}))})).catch((()=>{i.value.trim()===s&&(o.textContent="",o.insertAdjacentHTML("afterbegin",r))}))}function l({topEntry:t,topType:e,filteredSongs:a},s,d,l,c){if(!(t||a&&a.length))return c.textContent="",void c.insertAdjacentHTML("afterbegin",r);let p='<div class="f gap-20 searchRS" data-testid="SearchResults"><div class="f gap-20 fdc searchRST">';if(t){const a=i(t);if(a){const s=(t.id.$t.match(/post-(\d+)/)||[])[1]||"false";if(p+=`<div class="searchRSTR${"Album"===e?" album":"Artist"===e?" artist":""}" data-testid="TopResults">`,p+='<div class="searchRSHead"><span class="elp1">Top Results</span></div>',p+=`<div class="ipst searchRSCon" id="top-results-content" data-top-content="${e}"><div class="f fdc gap-20 searchTRCon">`,p+=`<div class="searchTRCover"><img src="${a.image}" width="100" height="100" loading="lazy"></div>`,p+='<div class="seacrhTRInfo ipstBD">',p+=`<div class="ipstT seacrhTRTitle"><a class="domLoadContent" data-dom-id="${s}" data-dom-type="Post" href="${a.link}"><span>${a.title}</span></a></div>`,p+='<div class="f ai-c gap-7 seacrhTRMeta"><div class="rsType snippet"><span>'+e+"</span></div>","Album"===e&&a.composerRaw.trim()){const t=a.composerRaw.trim();p+='<div class="sprt"><span>•</span></div>',p+=`<div class="searchALK"><a class="domLoadContent" href="/search?q=${encodeURIComponent(t)}">${t}</a></div>`}if("Song"===e){const t=n(a.artistRaw);t&&(p+='<div class="sprt"><span>•</span></div><div class="searchALK">'+t+"</div>")}p+="</div></div>","Album"!==e&&(p+=`<div class="ipstBk"><button class="btn" data-play-id="${"Song"===e?s:"artist-"+s}" data-play-from="${e}" type="button" aria-label="Top Results Play"><span class="plyr-icon-play icon-pressed"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M232.3,114.3,88.3,26.4a15.5,15.5,0,0,0-16.1-.3A15.8,15.8,0,0,0,64,40V216a15.8,15.8,0,0,0,8.2,13.9,15.5,15.5,0,0,0,16.1-.3l144-87.9a16,16,0,0,0,0-27.4Z"></path></svg></span><span class="plyr-icon-pause icon-not-pressed"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M216,48V208a16,16,0,0,1-16,16H164a16,16,0,0,1-16-16V48a16,16,0,0,1,16-16h36A16,16,0,0,1,216,48ZM92,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H92a16,16,0,0,0,16-16V48A16,16,0,0,0,92,32Z"></path></svg></span></button></div>`),p+="</div></div></div>"}}if(a&&a.length&&(p+='<div class="searchRSFS" data-testid="FoundSongs"><div class="searchRSHead"><span class="elp1">Songs</span></div><div class="searchRSLS items">',a.forEach(((t,e)=>{const a=i(t);if(!a)return;const s=(t.id.$t.match(/post-(\d+)/)||[])[1]||"false";p+=`<div class="serachSItm" data-song-index="${e+1}"><div class="ipst" data-mbop="true"><div class="ipstI">`,p+=`<div><img src="${a.image}" alt="${a.title}" loading="lazy" style="width:100%"></div><div class="ipstBk">`,p+=`<button class="btn" data-play-id="${s}" data-play-from="Search Songs" type="button" title="Play"><span class="plyr-icon-play icon-pressed"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M232.3,114.3,88.3,26.4a15.5,15.5,0,0,0-16.1-.3A15.8,15.8,0,0,0,64,40V216a15.8,15.8,0,0,0,8.2,13.9,15.5,15.5,0,0,0,16.1-.3l144-87.9a16,16,0,0,0,0-27.4Z"></path></svg></span><span class="plyr-icon-pause icon-not-pressed"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M216,48V208a16,16,0,0,1-16,16H164a16,16,0,0,1-16-16V48a16,16,0,0,1,16-16h36A16,16,0,0,1,216,48ZM92,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H92a16,16,0,0,0,16-16V48A16,16,0,0,0,92,32Z"></path></svg></span></button>`,p+=`<button class="btn is-small is-primary fav-song" data-fav-id="${s}" title="Add to favorites" type="button"><svg class="hOff" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M128,216S28,160,28,92A52,52,0,0,1,128,72h0A52,52,0,0,1,228,92C228,160,128,216,128,216Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path></svg></button>`,p+=`<button class="btn more-menu" data-morelist-id="${s}" data-morelist-type="Song" data-morelist-image="${a.image}" data-morelist-url="${a.link}" data-morelist-artist="${a.artistRaw}" data-morelist-title="${a.title}" title="View options" type="button"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 512 512"><path d="M304 256c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zm120-48c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48zm-336 0c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z"></path></svg></button>`,p+='</div></div><div class="ipstBD">',p+=`<h4 class="ipstT"><a class="domLoadContent" data-dom-id="${s}" data-dom-type="Post" href="${a.link}">${a.title}</a></h4>`,p+=`<div class="snippet">${n(a.artistRaw)}</div>`,p+="</div></div></div>"})),p+="</div></div>"),"Artist"===e&&t){const e=i(t),a=e?.language.trim(),s=`/feeds/posts/default/-/Artist/${a?encodeURIComponent(a):""}?alt=json&max-results=99&orderby=published`;fetch(s).then((t=>t.json())).then((e=>{let a=(e.feed.entry||[]).map((e=>{const a=i(e),s=(e.id.$t.match(/post-(\d+)/)||[])[1];return a&&s!==(t.id.$t.match(/post-(\d+)/)||[])[1]?{...a,postId:s}:null})).filter((t=>t));if(o(a),a=a.slice(0,10),!a.length)return;let s='<div class="searchRSFS recArtist" data-testid="AutoArtist"><div class="searchRSHead"><span class="elp1">Recommended Artists</span></div><div class="searchRSLS items">';a.forEach(((t,e)=>{s+=`<div class="serachSItm" data-artist-index="${e+1}"><div class="ipst artist" data-mbop="true"><div class="ipstI">`,s+=`<div><img src="${t.image}" alt="${t.title}" loading="lazy" style="width:100%"></div><div class="ipstBk">`,s+=`<button class="btn" data-play-id="artist-${t.postId}" data-play-from="Artist" type="button" title="Play Radio"><span class="plyr-icon-play icon-pressed"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M232.3,114.3,88.3,26.4a15.5,15.5,0,0,0-16.1-.3A15.8,15.8,0,0,0,64,40V216a15.8,15.8,0,0,0,8.2,13.9,15.5,15.5,0,0,0,16.1-.3l144-87.9a16,16,0,0,0,0-27.4Z"></path></svg></span><span class="plyr-icon-pause icon-not-pressed"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M216,48V208a16,16,0,0,1-16,16H164a16,16,0,0,1-16-16V48a16,16,0,0,1,16-16h36A16,16,0,0,1,216,48ZM92,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H92a16,16,0,0,0,16-16V48A16,16,0,0,0,92,32Z"></path></svg></span></button>`,s+=`<button type="button" title="View options" class="ov btn more-menu" data-morelist-id="${t.postId}" data-morelist-type="Artist Play Radio" data-morelist-image="${t.image}" data-morelist-url="${t.link}" data-morelist-artist="false" data-morelist-title="${t.title}"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 512 512"><path d="M304 256c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zm120-48c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48zm-336 0c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z"></path></svg></button>`,s+='</div></div><div class="ipstBD">',s+=`<h4 class="ipstT"><a class="domLoadContent" data-dom-id="${t.postId}" data-dom-type="Post" href="${t.link}">${t.title}</a></h4>`,t.language&&(s+=`<div class="snippet">${t.language}</div>`),s+="</div></div></div>"})),s+="</div></div>";const n=c.querySelector(".searchRSFS");n?.insertAdjacentHTML("afterend",s)})).catch((()=>{}))}if("Song"===e&&t){const e=i(t),a=e?.language.trim(),s=e?.genre.trim(),r=`/feeds/posts/default/-/Song/${a?encodeURIComponent(a):""}?alt=json&max-results=99&orderby=published`;fetch(r).then((t=>t.json())).then((e=>{let a=(e.feed.entry||[]).map((e=>{const a=i(e),n=(e.id.$t.match(/post-(\d+)/)||[])[1];return a&&n!==(t.id.$t.match(/post-(\d+)/)||[])[1]?s&&a.genre.trim()!==s?null:{...a,postId:n}:null})).filter((t=>t));if(o(a),a=a.slice(0,10),!a.length)return;let r='<div class="searchRSFS recSongs" data-testid="AutoSongs"><div class="searchRSHead"><span class="elp1">Recommended Songs</span></div><div class="searchRSLS items">';a.forEach(((t,e)=>{r+=`<div class="serachSItm" data-auto-song-index="${e+1}"><div class="ipst" data-mbop="true"><div class="ipstI">`,r+=`<div><img src="${t.image}" alt="${t.title}" loading="lazy" style="width:100%"></div><div class="ipstBk">`,r+=`<button class="btn" data-play-id="${t.postId}" data-play-from="Recommended Songs Search" type="button" title="Play"><span class="plyr-icon-play icon-pressed"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M232.3,114.3,88.3,26.4a15.5,15.5,0,0,0-16.1-.3A15.8,15.8,0,0,0,64,40V216a15.8,15.8,0,0,0,8.2,13.9,15.5,15.5,0,0,0,16.1-.3l144-87.9a16,16,0,0,0,0-27.4Z"></path></svg></span><span class="plyr-icon-pause icon-not-pressed"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M216,48V208a16,16,0,0,1-16,16H164a16,16,0,0,1-16-16V48a16,16,0,0,1,16-16h36A16,16,0,0,1,216,48ZM92,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H92a16,16,0,0,0,16-16V48A16,16,0,0,0,92,32Z"></path></svg></span></button>`,r+=`<button class="btn is-small is-primary fav-song" data-fav-id="${t.postId}" title="Add to favorites" type="button"><svg class="hOff" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M128,216S28,160,28,92A52,52,0,0,1,128,72h0A52,52,0,0,1,228,92C228,160,128,216,128,216Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path></svg></button>`,r+=`<button class="btn more-menu" data-morelist-id="${t.postId}" data-morelist-type="Song" data-morelist-image="${t.image}" data-morelist-url="${t.link}" data-morelist-artist="${t.artistRaw}" data-morelist-title="${t.title}" title="View options" type="button"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 512 512"><path d="M304 256c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zm120-48c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48zm-336 0c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z"></path></svg></button>`,r+='</div></div><div class="ipstBD">',r+=`<h4 class="ipstT"><a class="domLoadContent" data-dom-id="${t.postId}" data-dom-type="Post" href="${t.link}">${t.title}</a></h4>`,r+=`<div class="snippet">${n(t.artistRaw)}</div>`,r+="</div></div></div>"})),r+="</div></div>";const d=c.querySelector(".searchRSFS");d?.insertAdjacentHTML("afterend",r)})).catch((()=>{}))}p+="</div></div>",c.textContent="",c.insertAdjacentHTML("afterbegin",p)}function c(){const t=[],e=document.getElementById("searchAjax"),a=e?.querySelector("#search_form");a&&t.push(a);const s=document.querySelector("#search_form2");return s&&t.push(s),t}window.searchAjax={init(){const t=document.getElementById("searchAjax");if(!t||"true"===t.dataset.searchAjaxInitialized)return;const e=t.querySelector("#searchQR");e&&(t.dataset.searchAjaxInitialized="true",t._origHTML=e.innerHTML,c().forEach((a=>{a.autocomplete="off",a.addEventListener("input",(()=>{s.has(a)&&clearTimeout(s.get(a));const i=a.value.trim();if(!i)return e.textContent="",void e.insertAdjacentHTML("afterbegin",t._origHTML);s.set(a,setTimeout((()=>d(i,a,t,e)),500))}))})))},search(t){if("string"!=typeof t)return;const e=t.trim();if(!e)return;const a=c();a.forEach((t=>t.value=e));const s=document.getElementById("searchAjax"),i=s?.querySelector("#searchQR");i&&d(e,a[0],s,i)},clearCache(){Object.keys(t).forEach((e=>delete t[e]))},reset(){c().forEach((t=>t.value=""));const t=document.getElementById("searchAjax"),s=t?.querySelector("#searchQR");s&&t._origHTML&&(s.textContent="",s.insertAdjacentHTML("afterbegin",t._origHTML)),e="",a=null},rerun(){if(!e||!a)return;const t=document.getElementById("searchAjax"),s=t?.querySelector("#searchQR");s&&d(e,a,t,s)}},window.searchAjax.init(),new MutationObserver((t=>{for(const e of t)for(const t of e.addedNodes)if(t instanceof HTMLElement&&("searchAjax"===t.id||t.querySelector("#searchAjax")))return void window.searchAjax.init()})).observe(document.documentElement,{childList:!0,subtree:!0})}();
