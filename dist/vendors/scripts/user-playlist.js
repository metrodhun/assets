!function(t,a){function e(){const t=a.getElementById("loadPlaylistCon");if(!t)return;let e,n=localStorage.getItem("userPlayList");try{e=JSON.parse(n)}catch{return}if(!Array.isArray(e)||0===e.length)return;let l,s=localStorage.getItem("imageUrlCache");try{l=s?JSON.parse(s):{}}catch{l={}}t.textContent="",e.forEach(((e,n)=>{const s=e.id,o=e.name||"Untitled",i=Array.isArray(e.songs)?e.songs[0]:null,r=i?i.id:"",c=`<a class="f ai-c gap-14 domLoadContent wPlay" href="/p/user-playlist.html?viewID=${s}" data-playlist-json="${n+1}" data-dom-id="358960674061927838" data-dom-type="Page"><img class="w-42 h-42 wPImg" data-post-id="${r}" src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" loading="lazy" alt="${o}" width="100%" /><span>${o}</span></a>`,d=a.createElement("div");d.innerHTML=c;const m=d.firstElementChild;t.appendChild(m);const g=m.querySelector(`img[data-post-id="${r}"]`);r&&g&&(l[r]?g.src=l[r]:fetch(`/feeds/posts/default/${r}?alt=json`).then((t=>t.json())).then((t=>{const a=t.entry||{};let e="";if(a.content?.$t){const t=a.content.$t.match(/data-image="([^"]+)"/);t&&(e=t[1])}!e&&a.media$thumbnail?.url&&(e=a.media$thumbnail.url),e||(e="https://cdn.metrodhun.com/dist/vendors/images/defaults/default-music-500x500.jpg"),g.src=e,l[r]=e,localStorage.setItem("imageUrlCache",JSON.stringify(l))})).catch((()=>{g.src="https://cdn.metrodhun.com/dist/vendors/images/defaults/default-music-500x500.jpg"})))}))}t.loadPlaylists=e,e()}(window,document);
!function(){const a=new Map;async function t(t){if(!t)return null;if(a.has(t))return a.get(t);const s=fetch(`/feeds/posts/default/${t}?alt=json`).then((a=>a.json())).then((a=>{const t=(a.entry.content?.$t||"").match(/data-image="([^"]+)"/);if(t)return t[1];const s=a.entry.media$thumbnail?.url;return s?s.replace(/s72-c/,"s200-c"):null})).catch((()=>null));return a.set(t,s),s}function s(a){a.innerHTML=""}function e(a=".usrMP",e="/p/user-playlist.html"){const i="string"==typeof a?document.querySelector(a):a;if(!i)return;if(window.location.pathname!==e)return void s(i);const l=JSON.parse(localStorage.getItem("userPlayList")||"[]"),n=new URLSearchParams(window.location.search).get("viewID");n?async function(a,e,i){s(a);const l=e.find((a=>a.id===i));if(!l)return void(a.innerHTML='<div class="f fdc gap-10 ai-c jc-c noItm"><div class="nItmSvg"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24"><path d="M15.728 14.443a.91.91 0 0 1-1.286 1.286 3.433 3.433 0 0 0-2.443-1.012c-.923 0-1.79.359-2.443 1.012a.909.909 0 1 1-1.286-1.286 5.237 5.237 0 0 1 3.728-1.544 5.234 5.234 0 0 1 3.73 1.544zm-6.75-3.526c.226-.225.355-.538.355-.857s-.129-.631-.355-.857a1.222 1.222 0 0 0-.857-.355c-.319 0-.631.13-.857.355-.225.226-.355.539-.355.857s.13.632.355.857c.225.225.538.355.857.355s.632-.129.857-.355zm6.901-2.069c-.319 0-.631.13-.857.355-.226.226-.355.538-.355.857s.129.632.355.857c.226.225.538.355.857.355s.632-.13.857-.355c.226-.225.355-.538.355-.857s-.129-.631-.355-.857a1.224 1.224 0 0 0-.857-.355zM22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0z"></path></svg></div><div class="nItmTxt">Playlist not found!</div></div>');const n=l.songs||[],o=e.findIndex((a=>a.id===i))+1,d=n[0]||{};a.innerHTML=`<div class="playListF"><div class="f ai-c cAS"><div class="cL"><div class="imgL"><img class="imgC" loading="lazy" src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" data-img-id="${d.id||""}" alt="${l.name}" width="100%" /><span class="angL"></span></div></div><div class="cR"><div class="sg-info sTY"><span>Playlist (${o})</span></div><h2 class="sg-h"><span>${l.name}</span></h2><div class="sg-info inF cCD"><div class="sg-label">Total Songs: ${n.length}</div></div><div class="sg-info inBtns"><button class="mx-btn playlist-play-btn" data-playlist-id="${l.id}" data-playlist-song-id="${d.id||""}" aria-label="Play ${l.name} Songs" type="button"><span class="mx-svg"><svg class="isPlaySvg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M232.3,114.3,88.3,26.4a15.5,15.5,0,0,0-16.1-.3A15.8,15.8,0,0,0,64,40V216a15.8,15.8,0,0,0,8.2,13.9,15.5,15.5,0,0,0,16.1-.3l144-87.9a16,16,0,0,0,0-27.4Z"></path></svg><svg class="isPauseSvg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M216,48V208a16,16,0,0,1-16,16H164a16,16,0,0,1-16-16V48a16,16,0,0,1,16-16h36A16,16,0,0,1,216,48ZM92,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H92a16,16,0,0,0,16-16V48A16,16,0,0,0,92,32Z"></path></svg><svg class="isEQSvg" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 21 24"><line class="equalizer-slide" stroke="#fff" stroke-width="2" x1="3" x2="3" y1="22" y2="2"/><line class="equalizer-slide" stroke="#fff" stroke-width="2" x1="8" x2="8" y1="22" y2="2"/><line class="equalizer-slide" stroke="#fff" stroke-width="2" x1="13" x2="13" y1="22" y2="2"/><line class="equalizer-slide" stroke="#fff" stroke-width="2" x1="18" x2="18" y1="22" y2="2"/></svg></span><span class="b mx-txt sPLY" data-text="Play"></span><span class="b mx-txt sPAU" data-text="Pause"></span></button><button class="mx-btnFS more-menu" data-morelist-id="${l.id}" data-morelist-song-id="${d.id}" data-morelist-playlist-id="${l.id}" data-morelist-type="Playlist" data-morelist-url="/p/user-playlist.html?viewID=${l.id}" data-morelist-image="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" data-morelist-title="${l.name}" data-morelist-playlist="Playlist (${o})" aria-label="View options for ${l.name}" type="button"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 512 512"><path d="M304 256c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zm120-48c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48zm-336 0c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z"/></svg></button></div></div></div></div><div class="searchIBP withPlay"><input id="search_form_playlist" class="shIP" type="text" placeholder="Search within playlists" aria-label="Search within playlists" autocomplete="off" /></div><div class="items" id="detail_list"></div>`,t(d.id).then((t=>{const s=a.querySelector(`img[data-img-id="${d.id}"]`);s&&t&&(s.src=t);const e=a.querySelector(`button[data-morelist-id="${l.id}"]`);e&&t&&(e.dataset.morelistImage=t)}));const r=a.querySelector("#detail_list");n.forEach((a=>{const s=document.createElement("div");s.className="ipst",s.dataset.title=a.title.toLowerCase(),s.dataset.mbop="true",s.innerHTML=`<div class="ipstI"><img loading="lazy" data-image-playlist-id="${a.id}" alt="${a.title}" src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" width="100%" />\n<div class="ipstBk"><button class="btn playlist-play-btn" data-playlist-id="${l.id}" data-playlist-song-id="${a.id}" data-play-from="Playlist" title="Play" type="button"><span class="plyr-icon-play icon-pressed"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M232.3,114.3,88.3,26.4a15.5,15.5,0,0,0-16.1-.3A15.8,15.8,0,0,0,64,40V216a15.8,15.8,0,0,0,8.2,13.9,15.5,15.5,0,0,0,16.1-.3l144-87.9a16,16,0,0,0,0-27.4Z"></path></svg></span><span class="plyr-icon-pause icon-not-pressed"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M216,48V208a16,16,0,0,1-16,16H164a16,16,0,0,1-16-16V48a16,16,0,0,1,16-16h36A16,16,0,0,1,216,48ZM92,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H92a16,16,0,0,0,16-16V48A16,16,0,0,0,92,32Z"></path></svg></span></button><button class="btn is-small is-primary fav-song" data-fav-id="${a.id}" title="Add to favorites" type="button"><svg class="hOff" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M128,216S28,160,28,92A52,52,0,0,1,128,72h0A52,52,0,0,1,228,92C228,160,128,216,128,216Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path></svg></button><button class="btn more-menu" data-morelist-id="${a.id}" data-morelist-type="Playlist Song" data-morelist-image="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" data-morelist-url="${a.url}" data-morelist-playlist="Playlist (${o})" data-morelist-title="${a.title}" title="View options" type="button"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 512 512"><path d="M304 256c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zm120-48c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48zm-336 0c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z"></path></svg></button></div></div><div class="ipstBD"><h4 class="elp1 ipstT"><a href="${a.url}" class="domLoadContent" data-dom-id="${a.id}" data-dom-type="Post">${a.title}</a></h4><div class="snippet">${function(a){const t=Date.now()-new Date(a).getTime(),s=Math.floor(t/1e3);if(s<60)return`${s} sec ago`;const e=Math.floor(s/60);if(e<60)return`${e} min ago`;const i=Math.floor(e/60);if(i<24)return`${i} hour${i>1?"s":""} ago`;const l=Math.floor(i/24);return`${l} day${l>1?"s":""} ago`}(a.addedAt)}</div></div>`,r.appendChild(s),t(a.id).then((t=>{if(!t)return;const e=s.querySelector(`img[data-image-playlist-id="${a.id}"]`),i=s.querySelector(`button.more-menu[data-morelist-id="${a.id}"]`);e&&(e.src=t),i&&(i.dataset.morelistImage=t)}))})),a.querySelector("#search_form_playlist").addEventListener("input",(t=>{const s=t.target.value.trim().toLowerCase(),e=r.querySelectorAll(".ipst");let i=0;e.forEach((a=>{const t=n.find((t=>t.id===a.querySelector("img").dataset.imagePlaylistId)),e=t&&(t.title.toLowerCase().includes(s)||(t.artist||"").toLowerCase().includes(s));a.style.display=e?"":"none",e&&i++}));let l=a.querySelector(".noSearchMatch");i?l&&l.remove():l||(l=document.createElement("div"),l.className="noSearchMatch f fdc gap-10 ai-c jc-c noItm",l.innerHTML='<div class="nItmSvg"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24"><path d="M15.728 14.443a.91.91 0 0 1-1.286 1.286 3.433 3.433 0 0 0-2.443-1.012c-.923 0-1.79.359-2.443 1.012a.909.909 0 1 1-1.286-1.286 5.237 5.237 0 0 1 3.728-1.544 5.234 5.234 0 0 1 3.73 1.544zm-6.75-3.526c.226-.225.355-.538.355-.857s-.129-.631-.355-.857a1.222 1.222 0 0 0-.857-.355c-.319 0-.631.13-.857.355-.225.226-.355.539-.355.857s.13.632.355.857c.225.225.538.355.857.355s.632-.129.857-.355zm6.901-2.069c-.319 0-.631.13-.857.355-.226.226-.355.538-.355.857s.129.632.355.857c.226.225.538.355.857.355s.632-.13.857-.355c.226-.225.355-.538.355-.857s-.129-.631-.355-.857a1.224 1.224 0 0 0-.857-.355zM22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0z"></path></svg></div><div class="nItmTxt">No related songs saved!</div>',r.appendChild(l))}))}(i,l,n):function(a,e){s(a);const i=e.length;a.innerHTML=`<div class="hDU"><h2>${i} Playlist${1!==i?"s":""}</h2></div><div class="uConT"><div class="searchIBP"><input id="search_form_playlist" class="shIP" type="text" placeholder="Search within playlists" aria-label="Search within playlists" autocomplete="off" /></div><div class="items" id="playlists_list"></div></div>`;const l=a.querySelector("#playlists_list");if(!i)return void(l.innerHTML="<div class=\"noSongsQueue\"><div class='f fdc gap-10 ai-c jc-c noItm'><div class='nItmSvg'><svg role='presentation' viewBox='0 0 24 24'><path d='M15.728 14.443a.91.91 0 0 1-1.286 1.286 3.433 3.433 0 0 0-2.443-1.012c-.923 0-1.79.359-2.443 1.012a.909.909 0 1 1-1.286-1.286 5.237 5.237 0 0 1 3.728-1.544 5.234 5.234 0 0 1 3.73 1.544zm-6.75-3.526c.226-.225.355-.538.355-.857s-.129-.631-.355-.857a1.222 1.222 0 0 0-.857-.355c-.319 0-.631.13-.857.355-.225.226-.355.539-.355.857s.13.632.355.857c.225.225.538.355.857.355s.632-.129.857-.355zm6.901-2.069c-.319 0-.631.13-.857.355-.226.226-.355.538-.355.857s.129.632.355.857c.226.225.538.355.857.355s.632-.13.857-.355c.226-.225.355-.538.355-.857s-.129-.631-.355-.857a1.224 1.224 0 0 0-.857-.355zM22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0z'></path></svg></div><div class='f fdc nItmTxt'><span class='qT1'>Pretty quiet in here.</span><span class='qT2'>No playlist created yet!</span></div><a class='domLoadContent' data-dom-id='8426167878057119209' data-dom-type='Page' href='/p/browse.html' title='Browse Latest Songs'><span>Browse New Releases</span></a></div></div>");e.forEach((a=>{const s=a.songs?.[0]||{},e=document.createElement("article");e.className="ipst",e.dataset.title=a.name.toLowerCase(),e.innerHTML=`<div class="ipstI"><img loading="lazy" width="100%" data-image-playlist-id="${s.id||""}" alt="${a.name}" src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" /><div class="ipstBk"><button class="btn playlist-play-btn" data-playlist-id="${a.id}" data-playlist-song-id="${s.id||""}" data-play-from="Playlist Home" title="Play" type="button"><svg role="presentation" viewBox="0 0 512 512"><path d="M133,440a35.37,35.37,0,0,1-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37,7.46-27.53,19.46-34.33a35.13,35.13,0,0,1,35.77.45L399.12,225.48a36,36,0,0,1,0,61L151.23,434.88A35.5,35.5,0,0,1,133,440Z"/></svg></button></div></div><div class="ipstBD"><h4 class="elp1 ipstT"><a href="/p/user-playlist.html?viewID=${a.id}" class="domLoadContent" data-dom-id="358960674061927838" data-dom-type="Page">${a.name}</a></h4><div class="snippet">Total songs: ${a.songs?.length||0}</div></div>`,l.appendChild(e),t(s.id).then((a=>{a&&(e.querySelector("img").src=a)}))})),a.querySelector("#search_form_playlist").addEventListener("input",(t=>{const s=t.target.value.trim().toLowerCase(),i=l.querySelectorAll("article.ipst");let n=0;e.forEach(((a,t)=>{const e=i[t],l=a.name.toLowerCase().includes(s),o=(a.songs||[]).some((a=>a.title.toLowerCase().includes(s)||(a.artist||"").toLowerCase().includes(s)));l||o?(e.style.display="",n++):e.style.display="none"}));let o=a.querySelector(".noSearchMatch");n?o&&o.remove():o||(o=document.createElement("div"),o.className="f fdc gap-10 ai-c jc-c noItm noSearchMatch",o.innerHTML='<div class="nItmSvg"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24"><path d="M15.728 14.443a.91.91 0 0 1-1.286 1.286 3.433 3.433 0 0 0-2.443-1.012c-.923 0-1.79.359-2.443 1.012a.909.909 0 1 1-1.286-1.286 5.237 5.237 0 0 1 3.728-1.544 5.234 5.234 0 0 1 3.73 1.544zm-6.75-3.526c.226-.225.355-.538.355-.857s-.129-.631-.355-.857a1.222 1.222 0 0 0-.857-.355c-.319 0-.631.13-.857.355-.225.226-.355.539-.355.857s.13.632.355.857c.225.225.538.355.857.355s.632-.129.857-.355zm6.901-2.069c-.319 0-.631.13-.857.355-.226.226-.355.538-.355.857s.129.632.355.857c.226.225.538.355.857.355s.632-.13.857-.355c.226-.225.355-.538.355-.857s-.129-.631-.355-.857a1.224 1.224 0 0 0-.857-.355zM22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0z"></path></svg></div><div class="nItmTxt">No songs found!</div>',l.appendChild(o))}))}(i,l)}window.renderUserPlaylists=e,e()}();
!function(){async function e(){const e=localStorage.getItem("userPlayList");if(!e)return[];try{return JSON.parse(e)}catch(e){return console.error("Error parsing userPlayList from localStorage",e),[]}}const t={};function a(e,t=null){const a=document.getElementById("queue");if(!a)return;a.innerHTML="",e.forEach((e=>{const t=document.createElement("li");t.className="plyr-item",t.setAttribute("data-queue-id",e.songId),t.setAttribute("data-music-id",e.musicId),t.setAttribute("data-genre",e.genre),t.setAttribute("data-song-source",e.postURL),t.innerHTML=`<article class="f ai-c plyr-list-item-inner"><div class="f ai-c jc-c plyr-item-list dragQ"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24"><path d="M16 2C17.1046 2 18 2.89543 18 4C18 5.10457 17.1046 6 16 6C14.8954 6 14 5.10457 14 4C14 2.89543 14.8954 2 16 2Z"></path><path d="M16 10C17.1046 10 18 10.8954 18 12C18 13.1046 17.1046 14 16 14C14.8954 14 14 13.1046 14 12C14 10.8954 14.8954 10 16 10Z"></path><path d="M8 18C9.10457 18 10 18.8954 10 20C10 21.1046 9.10457 22 8 22C6.89543 22 6 21.1046 6 20C6 18.8954 6.89543 18 8 18Z"></path><path d="M16 18C17.1046 18 18 18.8954 18 20C18 21.1046 17.1046 22 16 22C14.8954 22 14 21.1046 14 20C14 18.8954 14.8954 18 16 18Z"></path><path d="M8 2C9.10457 2 10 2.89543 10 4C10 5.10457 9.10457 6 8 6C6.89543 6 6 5.10457 6 4C6 2.89543 6.89543 2 8 2Z"></path><path d="M8 10C9.10457 10 10 10.8954 10 12C10 13.1046 9.10457 14 8 14C6.89543 14 6 13.1046 6 12C6 10.8954 6.89543 10 8 10Z"></path></svg></div><div class="plyr-item-list"><div class="plyr-queue-ca"><div class="plyr-qimg"><img alt="${e.songName}" width="40" src="${e.imageUrl}" loading="lazy" height="40" /><button aria-label="Play ${e.songName} from Queue" class="btn queue-play" type="button" data-queue-play-id="${e.songId}"><span class="plyr-icon-play"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M232.3,114.3,88.3,26.4a15.5,15.5,0,0,0-16.1-.3A15.8,15.8,0,0,0,64,40V216a15.8,15.8,0,0,0,8.2,13.9,15.5,15.5,0,0,0,16.1-.3l144-87.9a16,16,0,0,0,0-27.4Z"></path></svg></span><span class="plyr-icon-pause"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M216,48V208a16,16,0,0,1-16,16H164a16,16,0,0,1-16-16V48a16,16,0,0,1,16-16h36A16,16,0,0,1,216,48ZM92,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H92a16,16,0,0,0,16-16V48A16,16,0,0,0,92,32Z"></path></svg></span><span class="plyr-equalizer"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 21 24"><line class="equalizer-slide" stroke="#fff" stroke-width="2" x1="3" y1="22" x2="3" y2="2"></line><line class="equalizer-slide" stroke="#fff" stroke-width="2" x1="8" y1="22" x2="8" y2="2"></line><line class="equalizer-slide" stroke="#fff" stroke-width="2" x1="13" y1="22" x2="13" y2="2"></line><line class="equalizer-slide" stroke="#fff" stroke-width="2" x1="18" y1="22" x2="18" y2="2"></line></svg></span></button></div><div class="plyr-qinfo"><span class="plyr-qsn">${e.songName}</span><span class="plyr-qan">${e.artist}</span></div></div></div><div class="f ai-c jc-c plyr-item-list"><button class="rmM" data-remove-song-id="${e.songId}" aria-label="Playlist: Remove ${e.songName} from Queue" type="button"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 768 768"><g><path d="M655.5,112.5C582.9,39.9,486.6,0,384,0S185.1,39.9,112.5,112.5S0,281.4,0,384s39.9,198.9,112.5,271.5S281.4,768,384,768 s198.9-39.9,271.5-112.5S768,486.6,768,384S728.1,185.1,655.5,112.5z M624.6,624.6C560.3,689,474.8,724.4,384,724.4 S207.7,689,143.4,624.6C10.7,492,10.7,276,143.4,143.4C207.7,79,293.2,43.6,384,43.6S560.3,79,624.6,143.4 C757.3,276,757.3,492,624.6,624.6z"></path><path d="M553.2,214.8c-8.6-8.6-22.3-8.6-30.9,0L384,353.1L245.7,214.8c-8.6-8.6-22.3-8.6-30.9,0c-8.6,8.6-8.6,22.3,0,30.9 L353.1,384L214.8,522.3c-8.6,8.6-8.6,22.3,0,30.9c4.2,4.2,9.9,6.5,15.4,6.5s11.2-2.1,15.4-6.5l138.3-138.3l138.3,138.3 c4.2,4.2,9.9,6.5,15.4,6.5c5.7,0,11.2-2.1,15.4-6.5c8.6-8.6,8.6-22.3,0-30.9L414.9,384l138.3-138.3 C561.8,237.1,561.8,223.4,553.2,214.8z"></path></g></svg></button></div><div class="f ai-c jc-c plyr-item-list"><button class="btn user-like-queue" data-fav-id="${e.songId}" aria-label="Playlist: Add to favorites ${e.songName} from Queue" type="button"><svg class="hOff fn" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 256 256"><path d="M128,216S28,160,28,92A52,52,0,0,1,128,72h0A52,52,0,0,1,228,92C228,160,128,216,128,216Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path></svg></button></div><div class="plyr-item-list"><span class="plyr-qsd">${e.duration}</span><button class="more-menu" data-morelist-id="${e.songId}" aria-label="Playlist More from Queue: ${e.songId}" type="button" data-morelist-type="Song Queue" data-morelist-image="${e.imageUrl}" data-morelist-url="${e.postURL}" data-morelist-artist="${e.artist}" data-morelist-title="${e.songName}"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 512 512"><path d="M304 256c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zm120-48c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48zm-336 0c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z"></path></svg></button></div></article>`,a.appendChild(t)}));const i=e.find((e=>e.songId===t))||e[0];if(!i)return void console.warn("No valid playlist tracks loaded.");const s=a.querySelector(`li[data-queue-id="${i.songId}"]`);s&&s.classList.add("is-current");let n=[];i.genre&&n.push(i.genre),i.artist&&n.push(...i.artist.split(",").map((e=>e.trim()))),n=[...new Set(n)],a.setAttribute("data-queue-meta",`[${n.join(",")}]`),a.setAttribute("data-lang-queue",i.language||""),a.setAttribute("data-type-queue",i.songType||""),i.movie?a.setAttribute("data-movie-queue-name",i.movie):a.removeAttribute("data-movie-queue-name"),a.setAttribute("data-is-played-from",i.playlistName);const l=document.getElementById("player");l&&l.classList.remove("hidden"),window.rightTimeEl&&(window.rightTimeEl.innerHTML=i.duration),window.leftTimeEl&&(window.leftTimeEl.innerHTML="0:00"),window.togglePlay&&(window.togglePlay.classList.add("is-pressed"),window.togglePlay.setAttribute("aria-pressed","true"));const o=document.getElementById("p-img");o&&(o.style.backgroundImage=`url("${i.imageUrl}")`);const r=document.getElementById("p-title");r&&(r.innerHTML=`<a class="domLoadContent" data-dom-id="${i.songId}" href="${i.postURL}" data-dom-type="Post">${i.songName}</a>`);const d=document.getElementById("p-artist");if(d){const e=(i.artist||"").split(",").map((e=>e.trim())).filter(Boolean);d.innerHTML=e.map((e=>`<a class="domLoadContent" data-dom-type="Post" data-dom-auto="Artist" data-dom-id="false" href="${"/search?q="+encodeURIComponent(e)}">${e}</a>`)).join(", ")}const u=document.getElementById("p-fav");u&&u.setAttribute("data-fav-id",i.songId);const c=document.getElementById("p-more");c&&(c.setAttribute("data-morelist-id",i.songId),c.setAttribute("data-morelist-type","Player"));const m=document.getElementById("music");m&&(window.ytPlayer?window.ytPlayer.loadVideoById(i.musicId):(m.innerHTML=`<iframe id="youtube-player" class="w-full" src="https://www.youtube-nocookie.com/embed/${i.musicId}?&controls=0&disablekb=1&enablejsapi=1&iv_load_policy=3&modestbranding=1&playsinline=1&rel=0&showinfo=0&autoplay=1&mute=0&start=0" allowfullscreen allow="autoplay; encrypted-media; picture-in-picture"></iframe>`,loadYouTubeAPI().then((e=>{window.ytPlayer=new e.Player("youtube-player",{events:{onReady:function(e){window.paceLoader.animate(),document.documentElement.classList.add("is-initializing"),e.target.playVideo(),requestAnimationFrame(window.updateTime)},onStateChange:function(t){if(window.paceLoader.remove(),applyPlayerItemColor(),document.documentElement.classList.remove("is-initializing","is-playing","is-paused","is-buffering"),t.data===e.PlayerState.PLAYING)document.documentElement.classList.add("is-playing"),window.togglePlay&&(window.togglePlay.classList.add("is-pressed"),window.togglePlay.setAttribute("aria-pressed","true")),requestAnimationFrame(window.updateTime);else if(t.data===e.PlayerState.PAUSED)document.documentElement.classList.add("is-paused"),window.togglePlay&&(window.togglePlay.classList.remove("is-pressed"),window.togglePlay.setAttribute("aria-pressed","false"));else if(t.data===e.PlayerState.BUFFERING)document.documentElement.classList.add("is-buffering");else if(t.data===e.PlayerState.ENDED){const e=localStorage.getItem("repeat_song");if("1"===e)window.ytPlayer.seekTo(0,!0),window.ytPlayer.playVideo();else if("2"===e){if(document.querySelectorAll("#queue li.plyr-item").length<=1)window.ytPlayer.seekTo(0,!0),window.ytPlayer.playVideo();else{let e=document.querySelector("#queue li.plyr-item.is-current").nextElementSibling;for(;e&&!e.classList.contains("plyr-item");)e=e.nextElementSibling;if(e)handleQueueButtonPlay(e.querySelector("[data-queue-play-id]"));else{const e=a.querySelector("li.plyr-item:first-child");if(e){const t=e.querySelector("[data-queue-play-id]");t&&(handleQueueButtonPlay(t),updateNextButtonState())}}}}else playNextSong();requestAnimationFrame(window.updateTime)}}}})})).catch((e=>console.error("Error initializing YouTube API:",e))))),function(){const e=document.querySelector("#queue li.plyr-item.is-current"),t=e?e.getAttribute("data-queue-id"):null;document.querySelectorAll(".playlist-play-btn").forEach((e=>{e.getAttribute("data-playlist-song-id")===t?e.classList.add("is-current"):e.classList.remove("is-current")}))}()}async function i(i,s){const n=(await e()).find((e=>e.id===i));if(!n)return console.warn("no such playlist",i);const l=await async function(e){const a=e.songs.slice(0,50);return Promise.all(a.map((async a=>{const i=a.id;if(t[i])return{...t[i],playlistId:e.id,playlistName:e.name,songId:a.id,addedAt:a.addedAt};try{const s=await fetch(`/feeds/posts/default/${i}?alt=json`);if(!s.ok)return console.error(`Failed to fetch feed for song ${i}`),null;const n=await s.json(),l=n.entry.content.$t,o=(new DOMParser).parseFromString(l,"text/html").querySelector("#post-song-data");if(!o)return console.error(`Song data element not found for song ${i}`),null;const r={postURL:n.entry.link.find((e=>"alternate"===e.rel))?.href||"",musicId:o.getAttribute("data-music"),imageUrl:o.getAttribute("data-image"),songName:o.getAttribute("data-title-name"),artist:o.getAttribute("data-artist"),duration:o.getAttribute("data-duration"),genre:o.getAttribute("data-genre"),language:o.getAttribute("data-language"),movie:o.getAttribute("data-movie"),songType:o.getAttribute("data-song-type")};return t[i]=r,{...r,playlistId:e.id,playlistName:e.name,songId:a.id,addedAt:a.addedAt}}catch(e){return console.error(`Error fetching playlist song ${i}`,e),null}}))).then((e=>e.filter(Boolean)))}(n);if(l.length){if(s){const e=l.findIndex((e=>e.songId===s));if(e>0){const[t]=l.splice(e,1);l.unshift(t)}}a(l,s),updateQueueData()}}document.body.addEventListener("click",(e=>{const t=e.target.closest(".playlist-play-btn");if(!t)return;i(t.getAttribute("data-playlist-id"),t.getAttribute("data-playlist-song-id"))}))}();
document.addEventListener("click",(function(t){if(t.target.matches("button.revSong")){const t=document.createElement("div");t.className="f ai-c jc-c p16 confirmPopup",t.innerHTML='<div class="popupContent"><p>Are you sure to clear?</p><div class="f jc-c gap-30 popupActions"><a href="/p/user-playlist.html" class="domLoadContent" data-dom-id="358960674061927838" data-dom-type="Page"><button class="btn confirmYes" aria-label="Playlist remove Yes" type="button">Yes</button></a><button class="btn confirmNo" aria-label="Playlist remove No" type="button">No</button></div></div>',document.body.appendChild(t);const e=()=>{t&&t.parentNode&&t.parentNode.removeChild(t)};t.addEventListener("click",(function(t){const o=t.target;if(o.matches("button.confirmYes"))try{const t=new URLSearchParams(window.location.search).get("viewID"),e=localStorage.getItem("userPlayList"),o=e?JSON.parse(e):[],a=o.findIndex((e=>e.id===t));a>-1?(o.splice(a,1),localStorage.setItem("userPlayList",JSON.stringify(o)),toastNotif.success("Playlist removed")):toastNotif.error("Try again...")}catch(t){console.error(t),toastNotif.error("Try again...")}finally{e()}o.matches("button.confirmNo")&&e()})),t.addEventListener("mousedown",(function(o){t.querySelector(".popupContent").contains(o.target)||e()}))}}));
