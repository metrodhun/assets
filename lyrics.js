!function(){async function e(){function t(e){e&&(e.innerHTML='<div class="f ai-c jc-c fdc gap-7 noLF"><span class="noLIcon"><svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 32 32"><path d="M22.3257 15.8354C22.1263 15.8695 21.9256 15.7966 21.7826 15.6536L16.347 10.218C16.2039 10.0749 16.1311 9.87422 16.1652 9.67483C16.3448 8.62476 16.84 7.61813 17.6506 6.80752C19.7334 4.72472 23.1103 4.72472 25.193 6.80752C27.2758 8.89032 27.2758 12.2672 25.193 14.35C24.3824 15.1606 23.3758 15.6557 22.3257 15.8354Z"></path><path d="M15.3386 12.9809C15.0613 12.7036 14.6058 12.7244 14.3549 13.0257L5.78725 23.3142C5.56666 23.5791 5.58439 23.9685 5.82814 24.2122L7.79205 26.1761C8.03586 26.42 8.42536 26.4376 8.69024 26.2169L18.9754 17.6459C19.2766 17.3949 19.2972 16.9395 19.02 16.6623L15.3386 12.9809Z"></path></svg></span><span class="noLTxtT">We do not have lyrics for this song yet</span><span class="noLTxtB">Please try again later</span></div>')}function a(){const e=document.querySelector("#player"),t=document.querySelector(".songLyrics");if(!e||!t)return;const a=getComputedStyle(e).getPropertyValue("--bg-dk-plyr").trim();a&&(t.style.backgroundColor=a)}if(await async function(){const e=document.querySelector(".songLyrics");if(!e)return;const i=e.querySelector(".lyricsCon");if(!i)return;i.innerHTML="<div class='pSDefaultC pSEMeta w30' aria-busy='true' aria-live='polite'></div><div class='pSDefaultC pSEMeta w40' aria-busy='true' aria-live='polite'></div><div class='pSDefaultC pSEMeta w50' aria-busy='true' aria-live='polite'></div><div class='pSDefaultC pSEMeta w60' aria-busy='true' aria-live='polite'></div><div class='pSDefaultC pSEMeta w70' aria-busy='true' aria-live='polite'></div><div class='pSDefaultC pSEMeta w80' aria-busy='true' aria-live='polite'></div><div class='pSDefaultC pSEMeta w30' aria-busy='true' aria-live='polite'></div><div class='pSDefaultC pSEMeta w40' aria-busy='true' aria-live='polite'></div><div class='pSDefaultC pSEMeta w50' aria-busy='true' aria-live='polite'></div><div class='pSDefaultC pSEMeta w60' aria-busy='true' aria-live='polite'></div><div class='pSDefaultC pSEMeta w70' aria-busy='true' aria-live='polite'></div><div class='pSDefaultC pSEMeta w80' aria-busy='true' aria-live='polite'></div><div class='pSDefaultC pSEMeta w30' aria-busy='true' aria-live='polite'></div><div class='pSDefaultC pSEMeta w40' aria-busy='true' aria-live='polite'></div><div class='pSDefaultC pSEMeta w50' aria-busy='true' aria-live='polite'></div><div class='pSDefaultC pSEMeta w60' aria-busy='true' aria-live='polite'></div><div class='pSDefaultC pSEMeta w70' aria-busy='true' aria-live='polite'></div><div class='pSDefaultC pSEMeta w80' aria-busy='true' aria-live='polite'></div>",e.querySelectorAll(".lyricsSrc").forEach((e=>e.remove()));const s=document.documentElement.dataset.musicPlaying;if(!s)return t(i);let r=null,n="Unknown",l="",c="",o="",u="",p=!1;try{const e=await fetch(`/feeds/posts/default/${encodeURIComponent(s)}?alt=json`);if(e.ok){const t=await e.json(),a=t.entry?.content?.$t||t.feed?.entry?.[0]?.content?.$t;if(a){const e=(new DOMParser).parseFromString(a,"text/html"),t=e.querySelector("#post-song-data");t&&(l=t.getAttribute("data-title-name")||"",c=t.getAttribute("data-artist")||"",o=t.getAttribute("data-composer")||"",u=[c,o].filter(Boolean).join(" "));const i=e.querySelector("#song-lyrics span[data-lyrics-text]");i&&(r=i.dataset.lyricsText||"",n=i.dataset.lyricsProvider||n,p=!0)}}}catch(e){console.warn("Blogger fetch error:",e)}async function d(e){try{const t=encodeURIComponent(`${l} ${e}`),a=await fetch(`https://lrclib.net/api/search?q=${t}`);if(a.ok){const e=await a.json();if(e.length>0){const t=e[0].id,a=await fetch(`https://lrclib.net/api/get/${t}`);if(a.ok){const e=await a.json();e.plainLyrics&&(r=e.plainLyrics,n="Lrclib",p=!1)}}}}catch(e){console.warn("LRCLib fetch failed:",e)}}if(!r&&l&&u&&await d(u),!r&&l&&o&&await d(o),!r)return t(i);const v=p?r.split(/\\n|\r?\n/):r.split(/\r?\n/).concat([""]);i.innerHTML="";let f=1;v.forEach((e=>{const t=e.trim();if(t){const e=document.createElement("div");e.className="LYTxt",e.dataset.lyricsLine=f++;const a=document.createElement("span");a.className=p?"b":"lrclibLyrics",p?a.dataset.text=t:a.textContent=t,e.appendChild(a),i.appendChild(e)}else{const e=document.createElement("div");e.className="LYGap",e.innerHTML='<svg aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 24 24"><path d="m12 3 .01 10.55c-.59-.34-1.27-.55-2-.55C7.79 13 6 14.79 6 17s1.79 4 4.01 4S14 19.21 14 17V7h4V3h-6zm-1.99 16c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"></path></svg>',i.appendChild(e)}}));const y=document.createElement("div");y.className="lyricsSrc",y.innerHTML=`<span>Lyrics provided by ${n}</span>`,e.appendChild(y),a()}(),!window._musicObserver){const t=document.documentElement;window._musicObserver=new MutationObserver((t=>{for(const i of t)if("attributes"===i.type&&"data-music-playing"===i.attributeName){e(),a();break}})),window._musicObserver.observe(t,{attributes:!0})}}window.initMusicFeatures=e,e()}();
